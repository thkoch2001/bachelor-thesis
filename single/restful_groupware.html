<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head> <title>1</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html --> 
<meta name="src" content="restful_groupware.tex"> 
<meta name="date" content="2012-03-05 17:48:00"> 
<link rel="stylesheet" type="text/css" href="restful_groupware.css"> 
</head><body 
>
    <div class="maketitle">
                                                                                         
                                                                                         
                                                                                         
                                                                                         

<h2 class="titleHead"></h2>
           <div class="author" ><span 
class="cmr-17">Thomas Koch</span>
<br />        <a 
href="thomas@koch.ro" class="url" ><span 
class="cmtt-12x-x-144">thomas@koch.ro</span></a>
<br /><span 
class="cmr-17">matriculation number 7250371</span></div><br />
<div class="date" ><span 
class="cmr-17">March 5, 2012</span></div>
<span 
class="cmr-17">Fernuniversit</span><span 
class="cmr-17">ät Hagen</span><br />
<span 
class="cmr-17">Faculty of mathematics and computer science</span>
    </div>
                                                                                         
                                                                                         
<h3 class="likesectionHead"><a 
 id="x1-1000"></a>Contents</h3>
    <div class="tableofcontents">
    <span class="sectionToc" >1 <a 
href="#x1-20001" id="QQ2-1-2">Introduction</a></span>
<br />    &#x00A0;<span class="subsectionToc" >1.1 <a 
href="#x1-30001" id="QQ2-1-3">Definitions</a></span>
<br />    &#x00A0;<span class="subsectionToc" >1.2 <a 
href="#x1-40002" id="QQ2-1-4">Related work</a></span>
<br />    &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.2.1 <a 
href="#x1-50001" id="QQ2-1-5">WebDAV, CalDAV, CardDAV</a></span>
<br />    &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.2.2 <a 
href="#x1-60002" id="QQ2-1-6">IMAP used by Kolab</a></span>
<br />    &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.2.3 <a 
href="#x1-70003" id="QQ2-1-7">OpenSocial</a></span>
<br />    &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.2.4 <a 
href="#x1-80004" id="QQ2-1-10">Others</a></span>
<br />    <span class="sectionToc" >2 <a 
href="#x1-90002" id="QQ2-1-11">Requirements</a></span>
<br />    &#x00A0;<span class="subsectionToc" >2.1 <a 
href="#x1-100001" id="QQ2-1-12">Scope</a></span>
<br />    &#x00A0;<span class="subsectionToc" >2.2 <a 
href="#x1-110002" id="QQ2-1-13">General Requirements</a></span>
<br />    &#x00A0;<span class="subsectionToc" >2.3 <a 
href="#x1-120003" id="QQ2-1-14">User Classes and Characteristics</a></span>
<br />    &#x00A0;<span class="subsectionToc" >2.4 <a 
href="#x1-130004" id="QQ2-1-16">Data Characteristics</a></span>
<br />    &#x00A0;<span class="subsectionToc" >2.5 <a 
href="#x1-140005" id="QQ2-1-17">Operation Environment</a></span>
<br />    &#x00A0;<span class="subsectionToc" >2.6 <a 
href="#x1-150006" id="QQ2-1-18">Design and Implementation Constraints</a></span>
<br />    &#x00A0;<span class="subsectionToc" >2.7 <a 
href="#x1-160007" id="QQ2-1-19">Specific Requirements</a></span>
<br />    &#x00A0;<span class="subsectionToc" >2.8 <a 
href="#x1-170008" id="QQ2-1-20">Excluded requirements</a></span>
<br />    <span class="sectionToc" >3 <a 
href="#x1-180003" id="QQ2-1-21">Media Types</a></span>
<br />    &#x00A0;<span class="subsectionToc" >3.1 <a 
href="#x1-190001" id="QQ2-1-22">Syntax vs. Semantic (Vocabulary)</a></span>
<br />    &#x00A0;<span class="subsectionToc" >3.2 <a 
href="#x1-200002" id="QQ2-1-23">Data Models of Media Types</a></span>
<br />    &#x00A0;&#x00A0;<span class="subsubsectionToc" >3.2.1 <a 
href="#x1-210001" id="QQ2-1-24">XML vs. JSON</a></span>
<br />    &#x00A0;&#x00A0;<span class="subsubsectionToc" >3.2.2 <a 
href="#x1-220002" id="QQ2-1-26">Hypermedia Support in JSON</a></span>
<br />    &#x00A0;<span class="subsectionToc" >3.3 <a 
href="#x1-230003" id="QQ2-1-27">vCard, iCalendar, xCard and xCal</a></span>
<br />    &#x00A0;&#x00A0;<span class="subsubsectionToc" >3.3.1 <a 
href="#x1-240001" id="QQ2-1-28">Hypermedia Support</a></span>
<br />    &#x00A0;<span class="subsectionToc" >3.4 <a 
href="#x1-250004" id="QQ2-1-30">Derived JSON formats for PIM data</a></span>
<br />    &#x00A0;<span class="subsectionToc" >3.5 <a 
href="#x1-260005" id="QQ2-1-31">Microformats, Microdata, RDFa</a></span>
<br />    &#x00A0;&#x00A0;<span class="subsubsectionToc" >3.5.1 <a 
href="#x1-270001" id="QQ2-1-32">Use Cases</a></span>
<br />    &#x00A0;&#x00A0;<span class="subsubsectionToc" >3.5.2 <a 
href="#x1-280002" id="QQ2-1-33">Format selection</a></span>
<br />    &#x00A0;&#x00A0;<span class="subsubsectionToc" >3.5.3 <a 
href="#x1-290003" id="QQ2-1-34">Producing Semantically annotated HTML</a></span>
<br />    &#x00A0;<span class="subsectionToc" >3.6 <a 
href="#x1-300006" id="QQ2-1-37">HTML Forms</a></span>
<br />    &#x00A0;<span class="subsectionToc" >3.7 <a 
href="#x1-310007" id="QQ2-1-38">Media Types for Collections</a></span>
<br />    &#x00A0;<span class="subsectionToc" >3.8 <a 
href="#x1-320008" id="QQ2-1-39">Media Type conversion</a></span>
<br />    &#x00A0;<span class="subsectionToc" >3.9 <a 
href="#x1-330009" id="QQ2-1-40">Updates with non isomorphic Media Types</a></span>
<br />    <span class="sectionToc" >4 <a 
href="#x1-340004" id="QQ2-1-41">Design</a></span>
<br />    &#x00A0;<span class="subsectionToc" >4.1 <a 
href="#x1-350001" id="QQ2-1-42">Overview</a></span>
<br />    &#x00A0;<span class="subsectionToc" >4.2 <a 
href="#x1-360002" id="QQ2-1-43">Reusable Patterns and Components</a></span>
<br />    &#x00A0;<span class="subsectionToc" >4.3 <a 
href="#x1-370003" id="QQ2-1-44">Interactions</a></span>
<br />    &#x00A0;&#x00A0;<span class="subsubsectionToc" >4.3.1 <a 
href="#x1-380001" id="QQ2-1-45">Discovery of Collections</a></span>
<br />    &#x00A0;&#x00A0;<span class="subsubsectionToc" >4.3.2 <a 
href="#x1-390002" id="QQ2-1-47">personalized Service Documents</a></span>
<br />    &#x00A0;&#x00A0;<span class="subsubsectionToc" >4.3.3 <a 
href="#x1-400003" id="QQ2-1-48">Atom Publishing Protocol</a></span>
<br />    &#x00A0;&#x00A0;<span class="subsubsectionToc" >4.3.4 <a 
href="#x1-410004" id="QQ2-1-49">Synchronizing Collections</a></span>
<br />    &#x00A0;&#x00A0;<span class="subsubsectionToc" >4.3.5 <a 
href="#x1-420005" id="QQ2-1-50">Media Entries and the content tag</a></span>
<br />    &#x00A0;&#x00A0;<span class="subsubsectionToc" >4.3.6 <a 
href="#x1-430006" id="QQ2-1-51">Modifying Resources</a></span>
<br />    &#x00A0;&#x00A0;<span class="subsubsectionToc" >4.3.7 <a 
href="#x1-440007" id="QQ2-1-52">Special Reports, Queries, Search</a></span>
<br />    &#x00A0;<span class="subsectionToc" >4.4 <a 
href="#x1-450004" id="QQ2-1-53">Components</a></span>
<br />    &#x00A0;&#x00A0;<span class="subsubsectionToc" >4.4.1 <a 
href="#x1-460001" id="QQ2-1-54">Dispatcher</a></span>
<br />    &#x00A0;&#x00A0;<span class="subsubsectionToc" >4.4.2 <a 
href="#x1-470002" id="QQ2-1-56">Resource Facades</a></span>
<br />    &#x00A0;&#x00A0;<span class="subsubsectionToc" >4.4.3 <a 
href="#x1-480003" id="QQ2-1-60">Other components</a></span>
<br />    &#x00A0;<span class="subsectionToc" >4.5 <a 
href="#x1-490005" id="QQ2-1-65">Detailed Design Considerations</a></span>
                                                                                         
                                                                                         
<br />    &#x00A0;<span class="subsectionToc" >4.6 <a 
href="#x1-500006" id="QQ2-1-66">Client Design</a></span>
<br />    <span class="sectionToc" >5 <a 
href="#x1-510005" id="QQ2-1-67">Summary and Conclusions</a></span>
<br />    <span class="sectionToc" ><a 
href="#Q1-1-69">References</a></span>
    </div> <div 
class="abstract" 
>
</div>
                                                                                         
                                                                                         
<a 
 id="x1-1001r1"></a>
                                                                                         
                                                                                         
<h3 class="sectionHead"><span class="titlemark">1  </span> <a 
 id="x1-20001"></a>Introduction</h3>
<!--l. 70--><p class="noindent" >Although computers became ubiquitous for some time now, they still don&#8217;t help their
users with their most basic information management needs: Make contacts, calendars,
notices and to do items available across different devices and share them with family and
peers.
<!--l. 75--><p class="indent" >    Existing solutions are either based on non-free software (Microsoft Outlook), brittle and
unreliable<span class="footnote-mark"><a 
href="restful_groupware2.html#fn1x0"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-2001f1"></a> 
or require the user to trust his personal data to the commercial interests of a multinational
corporation.
<!--l. 81--><p class="indent" >    TODO Überleitung
<!--l. 83--><p class="indent" >    A section about OpenSocial (<a 
href="#x1-70003">subsubsection&#x00A0;1.2.3</a>) provides additional motivation for
a restful API for social data. It also uses the opportunity to provide an alternative
approach to explain the rest architecture by going into detail why OpenSocial is not
restful.
<!--l. 88--><p class="indent" >    A few patterns or techniques are presented and proposed for reuse in other Rest applications to
ease the support for multiple alternative Media types. Among these techniques are Dependency
Injection to prepare resource method parameters (<a 
href="#x1-48010r3">Listing&#x00A0;4.4.3.3</a>), Resource Facades
(<a 
href="#x1-470002">subsubsection&#x00A0;4.4.2</a>), a programmable dispatcher (<a 
href="#x1-460001">subsubsection&#x00A0;4.4.1</a>).
<a 
 id="x1-2002r1"></a>
<h4 class="subsectionHead"><span class="titlemark">1.1  </span> <a 
 id="x1-30001"></a>Definitions</h4>
<!--l. 97--><p class="noindent" >Kolab is the name of a software product ... TODO
<!--l. 99--><p class="indent" >    A couple of related terms and concepts exist that all more or less overlap with the functionality
provided by Kolab: Groupware, Personal Information Management/Manager (PIM), Group
Information Management (GIM), Computer-supported cooperative/collaborative work, Knowledge
management, (Enterprise) Content Management.
<!--l. 105--><p class="indent" >    TODO: keinen der Terme benutzen.
<a 
 id="x1-3001r3"></a>
<h4 class="subsectionHead"><span class="titlemark">1.2  </span> <a 
 id="x1-40002"></a>Related work</h4>
<a 
 id="x1-4001r1"></a>
<h5 class="subsubsectionHead"><span class="titlemark">1.2.1  </span> <a 
 id="x1-50001"></a>WebDAV, CalDAV, CardDAV</h5>
<!--l. 110--><p class="noindent" >The most widely implemented Groupware protocols (in free software) today
seem to be CalDAV<span class="cite">[<a 
href="#XRFC4791">DDD07</a>]</span> for calendaring and CardDAV<span class="cite">[<a 
href="#XRFC6352">Dab11</a>]</span> for
contacts<span class="footnote-mark"><a 
href="restful_groupware3.html#fn2x0"><sup class="textsuperscript">2</sup></a></span><a 
 id="x1-5001f2"></a> .
Both protocols extend WebDAV<span class="cite">[<a 
href="#XRFC4918">Dus07</a>]</span> and thus inherit its characteristics.
<!--l. 116--><p class="indent" >    Two characteristics of WebDAV motivate an investigation of alternative approaches. The first
is the protocol&#8217;s complexity that complicates correct implementation. Unfortunately complexity is
hard to assess. Therefor only some indications are provided at this point.
<!--l. 121--><p class="indent" >    Lisa Dusseault, author of a WebDAV book<span class="cite">[<a 
href="#XDusseault2004">Dus04</a>]</span> and the standard itself
wrote<span class="footnote-mark"><a 
href="restful_groupware4.html#fn3x0"><sup class="textsuperscript">3</sup></a></span><a 
 id="x1-5002f3"></a> :
      <div class="quote">
      <!--l. 126--><p class="noindent" >Were I to propose CalDAV today it would probably be CalAtom.</div>
                                                                                         
                                                                                         
<!--l. 129--><p class="indent" >    The three standard WebDAV (127p), CalDAV (107p) and CardDAV (48p) add up to 282 pages of highly
specific standards. This is nearly double as much text as necessary for the design described in this work
(149 pages)<span class="footnote-mark"><a 
href="restful_groupware5.html#fn4x0"><sup class="textsuperscript">4</sup></a></span><a 
 id="x1-5003f4"></a> .
In contrast to WebDAV, Feeds and related technologies are also widely used so that a web
developer might already know the latter standards.
<!--l. 136--><p class="indent" >    The second and for this work more important characteristic of WebDAV is, that it is not restful, as explained
by Roy Fielding:<span class="footnote-mark"><a 
href="restful_groupware6.html#fn5x0"><sup class="textsuperscript">5</sup></a></span><a 
 id="x1-5004f5"></a> 
<!--l. 140--><p class="indent" >    <center class="quotation"><table class="quotation" 
border="0" cellpadding="0" cellspacing="15"><tr><td>
        <div class="quotation">
      <!--l. 141--><p class="indent" >    PROP* methods conflict with REST because they prevent important resources
      from having URIs and effectively double the number of methods for no good
      reason. Both Henrik and I argued against those methods at the time. It really
      doesn&#8217;t matter how uniform they are because they break other aspects of the
      overall model, leading to further complications in versioning (WebDAV versioning
      is hopelessly complicated), access control (WebDAV ACLs are completely wrong
      for HTTP), and just about every other extension to WebDAV that has been
      proposed.
      <!--l. 151--><p class="indent" >   [&#x2026;]
      <!--l. 153--><p class="indent" >   The problem with MOVE is that it is actually an operation on two independent
      namespaces (the source collection and destination collection). The user must
      have permission to remove from the source collection and add to the destination
      collection, which can be a bit of a problem if they are in different authentication
      realms. COPY has a similar problem, but at least in that case only one namespace
      is modified. I don&#8217;t think either of them map very well to HTTP.</div>
<!--l. 161--><p class="noindent" ></td></tr></table></center>
    Despite the comprehensiveness of CalDAV and CardDAV, the calconnect
consortium additionally develops two alternative protocols, CalWS-SOAP and
CalWS-REST<span class="footnote-mark"><a 
href="restful_groupware7.html#fn6x0"><sup class="textsuperscript">6</sup></a></span><a 
 id="x1-5005f6"></a> .
<a 
 id="x1-5006r5"></a>
<h5 class="subsubsectionHead"><span class="titlemark">1.2.2  </span> <a 
 id="x1-60002"></a>IMAP used by Kolab</h5>
<!--l. 180--><p class="noindent" >The Kolab Groupware Server is special in that it uses the Internet Message Access Protocol
(IMAP) as a synchronization protocol for all its data and thus the IMAP server as a
database.
<!--l. 184--><p class="indent" >    There are a few appealing advantages to this approach:
      <ul class="itemize1">
      <li class="itemize">The IMAP infrastructure used for mail can be reused.
      </li>
      <li class="itemize">Data is stored as file attachment. Thus the problematic mapping of groupware data
      items to relational schemes can be avoided.
      </li>
      <li class="itemize">IMAP supports offline work and later synchronization.</li></ul>
<!--l. 193--><p class="indent" >    The simplicity of just dropping files in a store however also has drawbacks, e.g: there&#8217;s no
                                                                                         
                                                                                         
moderating logic on the server site that could verify the correctness of stored data and there are no
query capabilities.
<!--l. 197--><p class="indent" >    IMAP in general also comes with its own challenges:
      <ul class="itemize1">
      <li class="itemize">The standard documents describing and extending IMAP are many<span class="footnote-mark"><a 
href="restful_groupware8.html#fn7x0"><sup class="textsuperscript">7</sup></a></span><a 
 id="x1-6001f7"></a> .
      </li>
      <li class="itemize">IMAP imposes a folder structure and does not permit alternative structures like tags
      as used by Google&#8217;s gmail.
      </li>
      <li class="itemize">Sam  Varshavchik,  author  of  the  Courier  Mail  Transfer  Agent,  argues  that  IMAP
      standard documents are &#8220;contradictory&#8221; and that implementations define their own
      understanding of what IMAP is<span class="footnote-mark"><a 
href="restful_groupware9.html#fn8x0"><sup class="textsuperscript">8</sup></a></span><a 
 id="x1-6002f8"></a> .</li></ul>
<a 
 id="x1-6003r6"></a>
<h5 class="subsubsectionHead"><span class="titlemark">1.2.3  </span> <a 
 id="x1-70003"></a>OpenSocial</h5>
<!--l. 226--><p class="noindent" >Roy Fielding wrote a blog post about the &#8220;SocialSite REST API&#8221;, stating that it isn&#8217;t restful at all but clearly
an RPC style API.<span class="footnote-mark"><a 
href="restful_groupware10.html#fn9x0"><sup class="textsuperscript">9</sup></a></span><a 
 id="x1-7001f9"></a> 
Fielding was referring to SocialSite, which is however an implementation of the OpenSocial specification.
Dave Johnson, a contributor to SocialSite, reacted on this critique by opening a discussion on an OpenSocial
mailing list:<span class="footnote-mark"><a 
href="restful_groupware11.html#fn10x0"><sup class="textsuperscript">10</sup></a></span><a 
 id="x1-7002f10"></a> 
      <div class="quote">
      <!--l. 234--><p class="noindent" >I must admit, it is not clear to me how OpenSocial REST API violates the six
      rules that Roy stated.</div>
<!--l. 237--><p class="noindent" >The above quote warrants a short comment. I also thought before, that REST would be so simple that
there wouldn&#8217;t be much need for further studying. Every web developer has some understanding
of URIs, HTTP and a bit less of Hypermedia. So it is easy to fall into the trap that
everything build on top of HTTP would be restful. Now however, after some more reading
about REST, I can easily find violations of the REST constraints in the OpenSocial
specification.
<!--l. 244--><p class="indent" >    Restful APIs are modeled around resources, their representations and links between them. The
authors of the OpenSocial API however seem to have modeled their API around the concept of
services:<span class="cite">[<a 
href="#XOSSpec2.0.1">Ope11</a>, Social API Server, sec 2, Services]</span>
      <div class="quote">
      <!--l. 248--><p class="noindent" >OpenSocial defines several services for providing access to a container&#8217;s data.</div>
<a 
 id="x1-7003r1"></a>
                                                                                         
                                                                                         
<span 
class="cmssbx-10x-x-120">1.2.3.1  Fielding&#8217;s critique</span>&#x00A0;   Fielding listed some rules that a restful API must obey, but did not
give explicit examples how OpenSocial violates this rules. The following section will provide such
examples.
      <div class="quote">
      <!--l. 257--><p class="noindent" >A REST API should not be dependent on any single communication protocol,
      [&#x2026;] any protocol element that uses a URI for identification must allow any URI
      scheme to be used for the sake of that identification. <span 
class="cmti-12">[Failure here implies that</span>
      <span 
class="cmti-12">identification is not separated from interaction.]</span></div>
    OpenSocial defines a construct called &#8220;REST-URI-Fragment&#8221; which is a clear violation of the
above rule. This URI fragment is simply an encoding of procedural parameters as elements of an
HTTP URI:<span class="cite">[<a 
href="#XOSSpec2.0.1">Ope11</a>, Core API Server, sec 2.1.1.2.2, REST-URI-Fragment]</span>
      <div class="quote">
      <!--l. 270--><p class="noindent" >Each service type defines an associated partial URI format. The base URI for each
      service is found in the URI element associated with the service in the discovery
      document. Each service type accepts parameters via the URL path. Definitions
      are of the form:
      <!--l. 275--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="cmtt-12">{a}/{b}/{c}</span></span></span></div>
<!--l. 278--><p class="indent" >    URIs can contain a query component that would be more appropriate to contain parameters.
This would also have made it clearer to see that the specification actually defines services instead
of resources. One test showing the misfit is to ask how dot-segments (&#8217;.&#8217; and &#8217;..&#8217;) inside the URI
fragment are interpreted and whether this conforms with the letter and spirit of the URI
standard.<span class="cite">[<a 
href="#XRFC3986">BLFM05</a>, sec 3.3]</span> Another misfit can be seen in the URI fragment to retrieve one or
multiple albums. In this case the &#8217;c&#8217; part in the quoted definition above is actually a list of albums
to retrieve separated by a slash.
<!--l. 287--><p class="indent" >    Fielding&#8217;s second bullet point most likely refers to the <span 
class="cmtt-12">X-HTTP-Method-Override </span>header. This header is
a widely used<span class="footnote-mark"><a 
href="restful_groupware12.html#fn11x0"><sup class="textsuperscript">11</sup></a></span><a 
 id="x1-7004f11"></a> 
workaround to allow the use of other HTTP methods than GET and POST from HTML forms or
through firewalls.
<!--l. 293--><p class="indent" >    The next two points again refer to a more serious issue:
      <div class="quote">
      <!--l. 296--><p class="noindent" >A REST API should spend almost all of its descriptive effort in defining the
      media type(s) used for representing resources and driving application state[&#x2026;].
      <span 
class="cmti-12">[Failure here implies that out-of-band information is driving interaction instead</span>
      <span 
class="cmti-12">of hypertext.] </span>A REST API must not define fixed resource names or hierarchies[&#x2026;]
      <span 
class="cmti-12">[Failure here implies that clients are assuming a resource structure due to out-of</span>
      <span 
class="cmti-12">band information[</span><span 
class="cmti-12">&#x2026;]].</span></div>
<!--l. 305--><p class="indent" >    The OpenSocial specification contains a lot of out-of-band information describing how to form
URIs to access information or which methods to use on which URIs for different actions. This
means that the OpenSocial API is not simple or intuitive to use but requires a client developer to
read a lot of specification, thus violating the simplicity property of a restful architecture. Since the
URIs are fixed in the specification and necessarily also in clients, the modifiability property is also
violated.<span class="cite">[<a 
href="#XFielding2000">Fie00</a>, sec 2.3]</span>
                                                                                         
                                                                                         
<!--l. 314--><p class="indent" >    The following tables give some examples of the specified URIs:
    <div class="table">
                                                                                         
                                                                                         
<!--l. 316--><p class="indent" >    <a 
 id="x1-70051"></a><hr class="float"><div class="float" 
>
                                                                                         
                                                                                         
<div class="tabular"> <table id="TBL-2" class="tabular" 
cellspacing="0" cellpadding="0"  
><colgroup id="TBL-2-1g"><col 
id="TBL-2-1"><col 
id="TBL-2-2"><col 
id="TBL-2-3"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-2-1-"><td  style="white-space:wrap; text-align:left;" id="TBL-2-1-1"  
class="td11"><!--l. 318--><p class="noindent" >URI fragment                             </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-1-2"  
class="td11">Method  </td><td  style="white-space:wrap; text-align:left;" id="TBL-2-1-3"  
class="td11"><!--l. 318--><p class="noindent" >Description                                                          </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-2-"><td  style="white-space:wrap; text-align:left;" id="TBL-2-2-1"  
class="td11"><!--l. 320--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="cmtt-12">/people/{User-Id}/@self</span></span></span>        </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-2-2"  
class="td11">GET      </td><td  style="white-space:wrap; text-align:left;" id="TBL-2-2-3"  
class="td11"><!--l. 320--><p class="noindent" >profile for User-Id                                                 </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-3-"><td  style="white-space:wrap; text-align:left;" id="TBL-2-3-1"  
class="td11"><!--l. 321--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="cmtt-12">/people/{User-Id}/@self</span></span></span>        </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-3-2"  
class="td11">DELETE</td><td  style="white-space:wrap; text-align:left;" id="TBL-2-3-3"  
class="td11"><!--l. 321--><p class="noindent" >remove User                                                        </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-4-"><td  style="white-space:wrap; text-align:left;" id="TBL-2-4-1"  
class="td11"><!--l. 322--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="cmtt-12">/people/{User-Id}/{Group-Id}</span></span></span>   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-4-2"  
class="td11">GET      </td><td  style="white-space:wrap; text-align:left;" id="TBL-2-4-3"  
class="td11"><!--l. 322--><p class="noindent" >full profiles of group members                                 </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-5-"><td  style="white-space:wrap; text-align:left;" id="TBL-2-5-1"  
class="td11"><!--l. 323--><p class="noindent" ><span class="obeylines-h"><span class="verb"></span></span>                               </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-5-2"  
class="td11">POST    </td><td  style="white-space:wrap; text-align:left;" id="TBL-2-5-3"  
class="td11"><!--l. 323--><p class="noindent" >Create relationship, target specified <br 
class="newline" />by <span class="obeylines-h"><span class="verb"><span 
class="cmtt-12">&#x003C;entry&#x003E;&#x003C;id&#x003E;</span></span></span> in body                                        </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-6-"><td  style="white-space:wrap; text-align:left;" id="TBL-2-6-1"  
class="td11"><!--l. 324--><p class="noindent" >                               </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-6-2"  
class="td11">POST    </td><td  style="white-space:wrap; text-align:left;" id="TBL-2-6-3"  
class="td11"><!--l. 324--><p class="noindent" >Update Person                                                     </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-7-"><td  style="white-space:wrap; text-align:left;" id="TBL-2-7-1"  
class="td11"><!--l. 325--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="cmtt-12">/people/{Initial-User-Id}/</span></span></span> <br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="cmtt-12">{Group-Id}/{Related-User-Id}</span></span></span>   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-7-2"  
class="td11">GET      </td><td  style="white-space:wrap; text-align:left;" id="TBL-2-7-3"  
class="td11"><!--l. 325--><p class="noindent" >???                                                                    </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-8-"><td  style="white-space:wrap; text-align:left;" id="TBL-2-8-1"  
class="td11"><!--l. 326--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="cmtt-12">/people/@supportedFields</span></span></span>       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-8-2"  
class="td11">GET      </td><td  style="white-space:wrap; text-align:left;" id="TBL-2-8-3"  
class="td11"><!--l. 326--><p class="noindent" >list of supported person profile fields                         </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-9-"><td  style="white-space:wrap; text-align:left;" id="TBL-2-9-1"  
class="td11"><!--l. 327--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="cmtt-12">/groups/{User-Id}[/{Group-Id}]</span></span></span> </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-9-2"  
class="td11">GET      </td><td  style="white-space:wrap; text-align:left;" id="TBL-2-9-3"  
class="td11"><!--l. 327--><p class="noindent" >one or all groups of a user                                      </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-10-"><td  style="white-space:wrap; text-align:left;" id="TBL-2-10-1"  
class="td11"><!--l. 328--><p class="noindent" >                               </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-10-2"  
class="td11">PUT      </td><td  style="white-space:wrap; text-align:left;" id="TBL-2-10-3"  
class="td11"><!--l. 328--><p class="noindent" >update group                                                       </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-11-"><td  style="white-space:wrap; text-align:left;" id="TBL-2-11-1"  
class="td11"><!--l. 329--><p class="noindent" >                               </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-11-2"  
class="td11">DELETE</td><td  style="white-space:wrap; text-align:left;" id="TBL-2-11-3"  
class="td11"><!--l. 329--><p class="noindent" >delete group                                                        </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-12-"><td  style="white-space:wrap; text-align:left;" id="TBL-2-12-1"  
class="td11"><!--l. 330--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="cmtt-12">/groups/{User-Id}</span></span></span>              </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-12-2"  
class="td11">POST    </td><td  style="white-space:wrap; text-align:left;" id="TBL-2-12-3"  
class="td11"><!--l. 330--><p class="noindent" >create group                                                        </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-13-"><td  style="white-space:wrap; text-align:left;" id="TBL-2-13-1"  
class="td11">                               </td></tr></table></div>
<br /> <div class="caption" 
><span class="id">Table&#x00A0;1: </span><span  
class="content">URI fragments for peoples and groups in the OpenSocial REST API</span></div><!--tex4ht:label?: x1-70051 -->
                                                                                         
                                                                                         
    </div><hr class="endfloat" />
    </div>
    <div class="table">
                                                                                         
                                                                                         
<!--l. 335--><p class="indent" >    <a 
 id="x1-70062"></a><hr class="float"><div class="float" 
>
                                                                                         
                                                                                         
<div class="tabular"> <table id="TBL-3" class="tabular" 
cellspacing="0" cellpadding="0"  
><colgroup id="TBL-3-1g"><col 
id="TBL-3-1"><col 
id="TBL-3-2"><col 
id="TBL-3-3"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-3-1-"><td  style="white-space:wrap; text-align:left;" id="TBL-3-1-1"  
class="td11"><!--l. 337--><p class="noindent" >URI fragment                                                   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-1-2"  
class="td11">Method</td><td  style="white-space:wrap; text-align:left;" id="TBL-3-1-3"  
class="td11"><!--l. 337--><p class="noindent" >Description                                           </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-2-"><td  style="white-space:wrap; text-align:left;" id="TBL-3-2-1"  
class="td11"><!--l. 339--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="cmtt-12">/albums/{User-Id}/@self</span></span></span>                     </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-2-2"  
class="td11">POST  </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-2-3"  
class="td11"><!--l. 339--><p class="noindent" >create album                                         </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-3-"><td  style="white-space:wrap; text-align:left;" id="TBL-3-3-1"  
class="td11"><!--l. 340--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="cmtt-12">/albums/{User-Id}/{Group-Id}[/Album-Id]*</span></span></span>    </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-3-2"  
class="td11">GET    </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-3-3"  
class="td11"><!--l. 340--><p class="noindent" >one or multiple albums                            </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-4-"><td  style="white-space:wrap; text-align:left;" id="TBL-3-4-1"  
class="td11"><!--l. 341--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="cmtt-12">/mediaItems/{User-Id}/{Group-Id}/{Album-Id}/</span></span></span>
<br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="cmtt-12">{MediaItem-Id}</span></span></span>                              </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-4-2"  
class="td11">GET    </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-4-3"  
class="td11"><!--l. 341--><p class="noindent" >one mediaitem                                       </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-5-"><td  style="white-space:wrap; text-align:left;" id="TBL-3-5-1"  
class="td11"><!--l. 342--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="cmtt-12">/mediaItem/{User-Id}/@self/{Album-Id}</span></span></span> (sic!)    </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-5-2"  
class="td11">POST  </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-5-3"  
class="td11"><!--l. 342--><p class="noindent" >create mediaitem                                    </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-6-"><td  style="white-space:wrap; text-align:left;" id="TBL-3-6-1"  
class="td11">                                            </td></tr></table></div>
<br /> <div class="caption" 
><span class="id">Table&#x00A0;2: </span><span  
class="content">URI fragments for albums and mediaitems in the OpenSocial REST API</span></div><!--tex4ht:label?: x1-70062 -->
                                                                                         
                                                                                         
    </div><hr class="endfloat" />
    </div>
<!--l. 348--><p class="indent" >    The last URI in <a 
href="#x1-70062">Table&#x00A0;2</a> is obviously missing an &#8220;s&#8221; behind <span 
class="cmtt-12">mediaItem</span>. This typo is
present and unfixed in the OpenSocial spec since Version 1.0, released in march 2010.
This is of course not a big issue in itself, but rather a sign that the specification is too
verbose and does over-specify things that should rather be auto-discovered through
hyperlinks.
<!--l. 354--><p class="indent" >    Fielding mentions in a comment to the same blog post that the OpenSocial API &#8220;could be
made so [restful] with some relatively small changes&#8221; but does not specify these changes. However
some issues can easily be identified.
<!--l. 358--><p class="indent" >    First the data structures defined in OpenSocial do not use URIs to refer to other
resources. Instead they use Object-Ids that must then be inserted in the appropriate
URI templates. Examples are the <span 
class="cmtt-12">recipients</span>, <span 
class="cmtt-12">senderId</span>, <span 
class="cmtt-12">collectionIds </span>of messages
and the <span 
class="cmtt-12">ownerId </span>of albums. The person structure does not contain fields referencing
other resources. Thus it does not obviously violate REST like the albums and messages.
However it does so even worse since there are hidden references only defined out-of-band
in the specification. One can retrieve the albums, relations or messages of a user by
filling in the <span 
class="cmtt-12">userId </span>in one of the specified URI templates. If Users would just contain
references to other resources related to a user, the specification could already be shortened a
lot.
<!--l. 370--><p class="indent" >    Another missed opportunity for a much more intuitive API is the relation of media items and
albums. This seems to be poster child example for a collection (album) to collection-element
(media item) relation which could have made use of the hierarchical character of URI paths.
OpenSocial however requires the client developer to use two different URI templates.
(<a 
href="#x1-70062">Table&#x00A0;2</a>)
<!--l. 376--><p class="indent" >    A not so small change to OpenSocial would be to either use already standardized and
registered media types where possible or to register new types where necessary. It seems that there
are some already existing media types that could be a good fit for OpenSocial but only miss a
canonical json representation for easy consumption by javascript applications. These are vCard for
persons,<span class="footnote-mark"><a 
href="restful_groupware13.html#fn12x0"><sup class="textsuperscript">12</sup></a></span><a 
 id="x1-7007f12"></a> 
ATOM entries<span class="cite">[<a 
href="#XRFC4287">NS05</a>]</span> for messages, activities and media items and ATOM categories, collections or
workspaces<span class="cite">[<a 
href="#XRFC5023">Gh07</a>]</span> for albums and groups. It would probably be necessary to add extensions to the
mentioned media types but vCard and ATOM both already anticipated this need and provided
mechanisms to do so.
<!--l. 388--><p class="indent" >    The use of the ATOM format could promote the adoption of OpenSocial because developers
could either reuse existing knowledge about ATOM or would be more motivated to learn about
a system that is based on an already widespread format. In fact OpenSocial already
mentions ATOM as a way to wrap OpenSocial data. However this wrapping does not build
extend and reuse ATOM semantics as proposed above but just puts the OpenSocial data
structures inside the entry/content element of ATOM. This kind of misuse of ATOM
does of course not deliver any advantage on top of the existing plain JSON or XML
representations.<span class="footnote-mark"><a 
href="restful_groupware14.html#fn13x0"><sup class="textsuperscript">13</sup></a></span><a 
 id="x1-7008f13"></a> 
Consequently the newest OpenSocial specification deprecates any reference to the ATOM
format.
<!--l. 402--><p class="indent" >    In Jan Algermissen&#8217;s &#8220;Classification of HTTP-based
                                                                                         
                                                                                         
APIs&#8221;<span class="footnote-mark"><a 
href="restful_groupware15.html#fn14x0"><sup class="textsuperscript">14</sup></a></span><a 
 id="x1-7009f14"></a> ,
the OpenSocial REST API would actually be &#8220;HTTP-based Type I&#8221; due to the lack
of media types and direct hyper links between related resources. Algermissen writes
that this level has the lowest possible initial cost of all HTTP APIs. Or in other words:
The OpenSocial specification authors might not have had to invest a lot to come up
with this API specification but maintenance and evolution cost may be medium or
high.
<a 
 id="x1-7010r7"></a>
<h5 class="subsubsectionHead"><span class="titlemark">1.2.4  </span> <a 
 id="x1-80004"></a>Others</h5>
<!--l. 413--><p class="noindent" >The Calendar Access Protocol (CAP)<span class="cite">[<a 
href="#XRFC4324">RBM05</a>]</span> was published in December 2005 about one year before
CalDAV and CalAtom. The standard comprises 131 pages. No evidence of any successful implementation
could be found<span class="footnote-mark"><a 
href="restful_groupware16.html#fn15x0"><sup class="textsuperscript">15</sup></a></span><a 
 id="x1-8001f15"></a> .
Cyrus Daboo, author of some calendaring standards, attributes the failure of CAP to its
complexity<span class="footnote-mark"><a 
href="restful_groupware17.html#fn16x0"><sup class="textsuperscript">16</sup></a></span><a 
 id="x1-8002f16"></a> .
<!--l. 421--><p class="indent" >    CalAtom and CardAtom build on top of the Atom Publishing Protocol and are therefor
discussed in <a 
href="#x1-400003">subsubsection&#x00A0;4.3.3</a>.
<a 
 id="x1-8003r2"></a>
<h3 class="sectionHead"><span class="titlemark">2  </span> <a 
 id="x1-90002"></a>Requirements</h3>
<a 
 id="x1-9001r4"></a>
<h4 class="subsectionHead"><span class="titlemark">2.1  </span> <a 
 id="x1-100001"></a>Scope</h4>
<!--l. 438--><p class="noindent" >This work defines a protocol to share
<a 
 id="x1-10001r12"></a>
<h4 class="subsectionHead"><span class="titlemark">2.2  </span> <a 
 id="x1-110002"></a>General Requirements</h4>
      <ul class="itemize1">
      <li class="itemize">Lesen/Schreiben  der  verwalteten  Resourcen:  Kontakte,  Kalender-Events,  Todos,
      Journal-Einträge, Free-Busy, &#x2026;
      </li>
      <li class="itemize">Synchronisation von Collections für Offline-Nutzung
      </li>
      <li class="itemize">einfach zu implementieren (vgl. CalDAV, CardDAV, IMAP) <span 
class="cmsy-10x-x-120">&#x2192; </span>ReST
      </li>
      <li class="itemize">Standardkonform <span 
class="cmsy-10x-x-120">&#x2192; </span>xCard, xCal, ATOM
      </li>
      <li class="itemize">nutzbar durch JavaScript: JSON basierte Medientypen
      </li>
      <li class="itemize">Groupware Elemente: Kontakte, Kalender-Events, Todos, Journal-Einträge, Free-Busy</li></ul>
<a 
 id="x1-11001r1"></a>
                                                                                         
                                                                                         
<span 
class="cmssbx-10x-x-120">2.2.0.1  Replacement for CardDAV</span>&#x00A0;   The web application should provide at least the same
features as the CardDAV protocol. It should be demonstrated that a restful application can serve
for the same purpose and thus that the additional complexity of WebDAV and CardDAV is not
necessary.
    The standard lists the supposed main features of CardDAV<span class="cite">[<a 
href="#XRFC6352">Dab11</a>, sec. 1]</span>:
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x1-11003x1">Ability to use multiple address books with hierarchical layout.
      </li>
      <li 
  class="enumerate" id="x1-11005x2">Ability  to  control  access  to  individual  address  books  and  address  entries  as  per
      WebDAV Access Control List (ACL) [RFC3744].
      </li>
      <li 
  class="enumerate" id="x1-11007x3">Principal collections can be used to enumerate and query other users on the system as
      per WebDAV ACL [RFC3744].
      </li>
      <li 
  class="enumerate" id="x1-11009x4">Server-side searching of address data, avoiding the need for clients to download an
      entire address book in order to do a quick address &#8217;expansion&#8217; operation.
      </li>
      <li 
  class="enumerate" id="x1-11011x5">Well-defined internationalization support through WebDAV&#8217;s use of XML.
      </li>
      <li 
  class="enumerate" id="x1-11013x6">Use  of  vCards  [RFC2426]  for  well-defined  address  schema  to  enhance  client
      interoperability.
      </li>
      <li 
  class="enumerate" id="x1-11015x7">Many  limited  clients  (e.g.,  mobile  devices)  contain  an  HTTP  stack  that  makes
      implementing WebDAV much easier than other protocols.</li></ol>
<!--l. 496--><p class="noindent" >There are some minor features of CardDAV, that are mainly inherited from WebDAV and whose
general usefulness outside of the scope of a content management system could be argued. See
<a 
href="#x1-170008">subsection&#x00A0;2.8</a> for a discussion of those.
<a 
 id="x1-11016r2"></a>
<span 
class="cmssbx-10x-x-120">2.2.0.2  Restful</span>&#x00A0;   The application should obey the constraints of a rest application as specified in
<span class="cite">[<a 
href="#XFielding2000">Fie00</a>]</span>.
    TODO: 4 Grundconstraints von REST auflisten.
    The above constraints are not an end in itself but lead to the following required or desirable
properties:
      <ul class="itemize1">
      <li class="itemize">Cacheability  (5.1.4)  can  keep  the  data  available  also  in  offline  mode,  improves
      performance and scalability.
      </li>
      <li class="itemize">Simplicity helps to develop glue code to connect the application to other systems or to
      extend it.
      </li>
      <li class="itemize">Modifiability allows to adapt the Groupware to changes in the organization.
                                                                                         
                                                                                         
      </li>
      <li class="itemize">Reliability should not need additional justification.
      </li>
      <li class="itemize">Administrative  scalability  means  that  intermediary  components  can  be  deployed
      independent of the administrator of the main application.</li></ul>
<!--l. 518--><p class="indent" >    Other outcomes described by Fielding that may not be of importance for the present work are:
scalability in terms of users, network performance and efficiency.
<a 
 id="x1-11017r13"></a>
<h4 class="subsectionHead"><span class="titlemark">2.3  </span> <a 
 id="x1-120003"></a>User Classes and Characteristics</h4>
<!--l. 527--><p class="noindent" >Different kinds of clients should be able to use the API. <a 
href="#x1-120013">Table&#x00A0;3</a> lists clients whose
constraints and characteristics must be respected in the design. The choice of clients and
their characteristics is intentionally conservative to cover a wide range of real world use
cases.
    <div class="table">
                                                                                         
                                                                                         
<!--l. 533--><p class="indent" >    <a 
 id="x1-120013"></a><a 
 id="x1-21004r1"></a><a 
 id="x1-210001"></a><hr class="float"><div class="float" 
>
                                                                                         
                                                                                         
<div class="tabular"> <table id="TBL-4" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-4-1g"><col 
id="TBL-4-1"></colgroup><colgroup id="TBL-4-2g"><col 
id="TBL-4-2"></colgroup><colgroup id="TBL-4-3g"><col 
id="TBL-4-3"></colgroup><colgroup id="TBL-4-4g"><col 
id="TBL-4-4"></colgroup><colgroup id="TBL-4-5g"><col 
id="TBL-4-5"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-4-1-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-1-1"  
class="td11">                   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-1-2"  
class="td11">Memory</td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-1-3"  
class="td11">Bandwidth</td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-1-4"  
class="td11"> preferred format </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-1-5"  
class="td11">comment                   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-2-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-2-1"  
class="td11">Web Browser (HTML5)</td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-2-2"  
class="td11"> 5 MB  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-2-3"  
class="td11"> 56 kbit/s </td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-2-4"  
class="td11">     JSON        </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-2-5"  
class="td11">workplace, internet cafe</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-3-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-3-1"  
class="td11">        Mobile Device</td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-3-2"  
class="td11">512 MB</td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-3-3"  
class="td11"> 384 kbit/s </td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-3-4"  
class="td11">   any/XML     </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-3-5"  
class="td11">Smart Phone, Tabled   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-4-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-4-1"  
class="td11">   Desktop application</td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-4-2"  
class="td11"> 1 GB  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-4-3"  
class="td11"> 10 Mbit/s </td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-4-4"  
class="td11">   any/XML     </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-4-5"  
class="td11">PIM suite                  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-5-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-5-1"  
class="td11">     Server application</td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-5-2"  
class="td11"> 4 GB  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-5-3"  
class="td11">100 Mbit/s</td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-5-4"  
class="td11">any/XML/HTML</td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-5-5"  
class="td11">intranet application     </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-6-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-6-1"  
class="td11">                    </td></tr></table></div>
<br /> <div class="caption" 
><span class="id">Table&#x00A0;3: </span><span  
class="content">Constraints of different API clients</span></div><!--tex4ht:label?: x1-120013 -->
                                                                                         
                                                                                         
    </div><hr class="endfloat" />
    </div>
<!--l. 546--><p class="indent" >    The most problematic client in the list is the web browser with only 5MB of storage capacity (via
WebStorage<span class="footnote-mark"><a 
href="restful_groupware18.html#fn17x0"><sup class="textsuperscript">17</sup></a></span><a 
 id="x1-12002f17"></a> )
a potentially very bad internet connection, the inability to leave data for later sessions (internet
cafe) and the restriction to one particular format (JSON). However this use case is of importance
as the OpenSocial&#x00A0;(&#x00A0;<a 
href="#x1-70003">1.2.3<!--tex4ht:ref: sec:opensocial --></a>) case shows. It is also the primary use case to justify an API that
provides multiple Media Types since it mandates JSON while the canonical Media Types (xCard,
xCal) support XML.
<a 
 id="x1-12003r14"></a>
<h4 class="subsectionHead"><span class="titlemark">2.4  </span> <a 
 id="x1-130004"></a>Data Characteristics</h4>
<!--l. 559--><p class="noindent" >Lacking sources for more accurate numbers, a couple of conservative estimates are made for the
size and number of resources in the scope of this work. This guesswork is not perfect. But it
provides a rationale behind later design decisions (<a 
href="#x1-370003">subsection&#x00A0;4.3<!--tex4ht:ref: sec:opensocial --></a>) and outlines their applicability
for a concrete use case.
<span 
class="cmssbx-10x-x-120">Contacts</span>&#x00A0;   It is believed that humans have regular social contacts to around 150
people<span class="footnote-mark"><a 
href="restful_groupware19.html#fn18x0"><sup class="textsuperscript">18</sup></a></span><a 
 id="x1-13001f18"></a> .
So the number of contacts in a users address book collection should at least handle 1500
contacts.
    The average textual data size associated to a contact is expected to be around 840
bytes<span class="footnote-mark"><a 
href="restful_groupware20.html#fn19x0"><sup class="textsuperscript">19</sup></a></span><a 
 id="x1-13002f19"></a> .
100 kb are enough for an image file to identify a face.
    So a collection with a data size of 1500<span 
class="cmmi-12">contacts</span><span 
class="cmsy-10x-x-120">* </span>840<img 
src="restful_groupware0x.png" alt="-bytes--
contact"  class="frac" align="middle"> <span 
class="cmsy-10x-x-120">&#x2248; </span>1<span 
class="cmmi-12">MB </span>should be a usable address
book without profile pictures for many users.
<span 
class="cmssbx-10x-x-120">Events</span>&#x00A0;   A very busy person may have 10 events per day. A two years calendar thus
contains 2 <span 
class="cmsy-10x-x-120">* </span>365 <span 
class="cmsy-10x-x-120">* </span>10 = 730 events. The core data of an event is estimated to comprise 356
bytes<span class="footnote-mark"><a 
href="restful_groupware21.html#fn20x0"><sup class="textsuperscript">20</sup></a></span><a 
 id="x1-13003f20"></a> . So
a useful calendar collection has a data size of 730<span 
class="cmmi-12">events </span><span 
class="cmsy-10x-x-120">* </span>356<img 
src="restful_groupware1x.png" alt="bytes
event"  class="frac" align="middle"> <span 
class="cmsy-10x-x-120">&#x2248; </span>0<span 
class="cmmi-12">.</span>25<span 
class="cmmi-12">MB</span>
<span 
class="cmssbx-10x-x-120">Conclusions</span>&#x00A0;   The size of full, useful collections of personal information items has the same order
of magnitude then the size of a digital image taken with today&#8217;s smart phones. With the worst case
bandwidth from <a 
href="#x1-120013">Table&#x00A0;3<!--tex4ht:ref: sec:opensocial --></a> the download of a full uncompressed collection lasts around
<img 
src="restful_groupware2x.png" alt="-2*1MB-
56kbit&#x2215;s"  class="frac" align="middle"> <span 
class="cmsy-10x-x-120">&#x2248; </span>5<span 
class="cmmi-12">min</span><span class="footnote-mark"><a 
href="restful_groupware22.html#fn21x0"><sup class="textsuperscript">21</sup></a></span><a 
 id="x1-13004f21"></a> .
Even with a drastic data compression of 90% the transfer would still last over 30 seconds. With the
next better bandwidth of the mobile device however the transfer duration for the uncompressed
case is already under one minute (<span 
class="cmsy-10x-x-120">&#x2248; </span>42<span 
class="cmmi-12">sec</span>).
    For all described clients the client&#8217;s storage is large enough to contain at least a few
collections.
                                                                                         
                                                                                         
<a 
 id="x1-13005r16"></a>
<h4 class="subsectionHead"><span class="titlemark">2.5  </span> <a 
 id="x1-140005"></a>Operation Environment</h4>
<!--l. 604--><p class="noindent" >The application is expected to be installed in a Java servlet container like Tomcat or Jetty and to
contact a separate storage component. The primarily targeted storage component is an IMAP
server with a Kolab conform set of groupware folders. However the design should not restrict
the extension to a document database like CouchDB, plain files, relational or XML
databases.
<a 
 id="x1-14001r17"></a>
<h4 class="subsectionHead"><span class="titlemark">2.6  </span> <a 
 id="x1-150006"></a>Design and Implementation Constraints</h4>
<a 
 id="x1-15001r18"></a>
<h4 class="subsectionHead"><span class="titlemark">2.7  </span> <a 
 id="x1-160007"></a>Specific Requirements</h4>
<a 
 id="x1-16001r3"></a>
<span 
class="cmssbx-10x-x-120">2.7.0.3  Nested and mixed collections</span>&#x00A0;   The design should not unnecessarily hinder that
collections could be nested or contain different kinds of media types, e.g. calendar items and
contacts.
    <span class="cite">[<a 
href="#XRFC6352">Dab11</a>, sec. 5.2]</span> forbids nested and mixed collections to ease the implementation of clients.
However both may make sense in certain scenarios and the protocol should not exclude such
scenarios. A collection could for example represent all items related to a project, which include
contacts, events, todos and notes.
<a 
 id="x1-16002r19"></a>
<h4 class="subsectionHead"><span class="titlemark">2.8  </span> <a 
 id="x1-170008"></a>Excluded requirements</h4>
<a 
 id="x1-17001r4"></a>
<span 
class="cmssbx-10x-x-120">2.8.0.4  Search</span>&#x00A0;   It is not required that the server implements any means to search its data. It is
not excluded that such a facility could be added later. It is however expected that searching could
be implemented separately. This could be done either on a synchronizing client or as a separate
system in the same administrative domain as the server.
<a 
 id="x1-17002r5"></a>
<span 
class="cmssbx-10x-x-120">2.8.0.5  Performance optimization</span>&#x00A0;   The system is meant to inherit the benefits of a restful
architecture. It should therefor be possible to attach separate caching intermediaries for read
requests. Rather then concentrating on the performance of the implementation of read requests it
should be taken care that the architecture supports external caching and thus avoids to serve the
same read request multiple times.
<a 
 id="x1-17003r6"></a>
<span 
class="cmssbx-10x-x-120">2.8.0.6  Access Control</span>&#x00A0;   The aspect of access control would broaden the scope of this work to
wide. However it could be kept in mind, whether the proposed design could be enhanced by a
separate access control design as proposed in <span class="cite">[<a 
href="#Xconf/rest/GrafZLW11">GZLW11</a>]</span>.
<a 
 id="x1-17004r7"></a>
<span 
class="cmssbx-10x-x-120">2.8.0.7  Copying and Moving</span>&#x00A0;   WebDAV introduces the HTTP verbs to COPY and MOVE. The
usefulness of such functionality must of course be compared to the complexity of the
implementation and the drawback of incompatibility to plain HTTP.
    It is possible to enhance a restful API with copy and move functionality without extending
HTTP. The only requirement is that additional hyperlinks can be attached to the resources of the
API. Allamaraju <span class="cite">[<a 
href="#XAllamaraju_2010">All10</a>, Ch. 11]</span> proposes &#8220;controller resources&#8221; that act on POST requests and
                                                                                         
                                                                                         
are linked from the resources they act on. Custom link relations are used to indicate the semantic
of the controller resource.
    This work does not include initial support for copy or move.
<a 
 id="x1-17005r8"></a>
<span 
class="cmssbx-10x-x-120">2.8.0.8  Versioning</span>&#x00A0;   WebDAV and therefor CalDAV and CardDAV support the versioning of
resources as an extension to the HTTP protocol. Versioning is an important feature for a text
authoring system that may have been the main target for the WebDAV protocol. It does however
seem to be of little use for the resources considered here. The resources are mostly created in one
session by one user and seldom modified.
<a 
 id="x1-17006r9"></a>
<span 
class="cmssbx-10x-x-120">2.8.0.9  Make Collections</span>&#x00A0;   WebDAV introduces the MKCOL HTTP verb to create collections.
CardDAV recommends that implementations support this to allow users to &#8220;organize their data
better&#8221;. An alternative would be to make use of ATOM categories for grouping. Instead of creating
a new (empty) collection the user would thus create a contact resource with a new category. An
ATOM service document could then link to a new (virtual) collection that only contains and
accepts resources of this category.
    TODO: What are the proposed ways to create collections? Post a feed to the service
document? Put a new service document? Put a feed document to the desired location?
<a 
 id="x1-17007r10"></a>
<span 
class="cmssbx-10x-x-120">2.8.0.10  Locking</span>&#x00A0;   As with Versioning, this is feature of WebDAV is not considered. Instead of
locking a resource HTTP supports conditional updates and leaves conflict resolution to the
client.
    <span class="cite">[<a 
href="#XNielsen1999">NL99</a>, sec. 1]</span> provides three questions to help deciding whether a protocol should support
locking and which in the present case advise against locking: <span 
class="cmti-12">The content is mergeable </span>in contrast
to binary data like images. <span 
class="cmti-12">The editing is expected to be localized to isolated points in the document</span>,
e.g. changing just one field in a content or event. And <span 
class="cmti-12">the content can be edited while the user is</span>
<span 
class="cmti-12">offline</span>.
<a 
 id="x1-17008r11"></a>
<span 
class="cmssbx-10x-x-120">2.8.0.11  Push notifications</span>&#x00A0;   This work does not include any means to actively
notify (push) a client about changes happening on the server. The client needs to
initiate a request (pull) to the server to look for changes. However separate solutions
exist<span class="footnote-mark"><a 
href="restful_groupware23.html#fn22x0"><sup class="textsuperscript">22</sup></a></span><a 
 id="x1-17009f22"></a> 
to enable a push workflow on top of a feed based application.<span class="cite">[<a 
href="#XWilde:2009:FQP:1693155.1693220">WM09</a>]</span> It
may therefor not be seen as a disadvantage to omit push notifications as a
requirement.<span class="footnote-mark"><a 
href="restful_groupware24.html#fn23x0"><sup class="textsuperscript">23</sup></a></span><a 
 id="x1-17010f23"></a> 
<a 
 id="x1-17011r11"></a>
    &#x00A0;
                                                                                         
                                                                                         
<h3 class="sectionHead"><span class="titlemark">3  </span> <a 
 id="x1-180003"></a>Media Types</h3>
      <div class="quote">
      <!--l. 711--><p class="noindent" >To some extent, people get REST wrong because I failed to include enough detail
      on media type design within my dissertation.&#x00A0;&#8211;&#x00A0;Roy T. Fielding</div>
<!--l. 714--><p class="noindent" >from: Rest APIs must be hypertext driven<span class="footnote-mark"><a 
href="restful_groupware25.html#fn24x0"><sup class="textsuperscript">24</sup></a></span><a 
 id="x1-18001f24"></a> 
<!--l. 717--><p class="indent" >    <span class="cite">[<a 
href="#XPautasso:2008:RWS:1367497.1367606">PZL08</a>, sec. 7.2]</span> identifies the support of different media types as an issue that &#8221;can
complicate and hinder the interoperability&#8221; and &#8221;requires more maintenance effort&#8221;.
<!--l. 719--><p class="indent" >    <span class="cite">[<a 
href="#XDavis:2011:XTR:1967428.1967437">DM11</a>]</span> proposes a XML based REST framework that uses XForms, XQuery, XProc, XSLT
and an XML database. It can benefit from the constraint that it only supports XML based media
types. It is to be seen, which ideas from this work could be reused in the case of a broader variety
of supported media types.
<a 
 id="x1-18002r20"></a>
<h4 class="subsectionHead"><span class="titlemark">3.1  </span> <a 
 id="x1-190001"></a>Syntax vs. Semantic (Vocabulary)</h4>
<!--l. 723--><p class="noindent" >The usage of standardized media types is one key difference between an API and a
restful API<span class="cite">[<a 
href="#XFielding2000">Fie00</a>, sec. 5.2.1.2]</span>. Only if the client has knowledge about the media
type can it do something meaningful with it besides just receiving it. In that sense,
the often used mime types application/xml or application/json are not really media
types. They don&#8217;t tell the browser or user anything meaningful beside the <span 
class="cmti-12">syntax </span>of the
data.<span class="footnote-mark"><a 
href="restful_groupware26.html#fn25x0"><sup class="textsuperscript">25</sup></a></span><a 
 id="x1-19001f25"></a> 
<!--l. 733--><p class="indent" >    To do anything meaningful with plain json or xml, the client programmer must normally look
up the meaning or <span 
class="cmti-12">semantic </span>of the data in the API documentation. The data therefor fails the
self-descriptive constraint of REST.
<!--l. 738--><p class="indent" >    Compare this with a mime type like <span 
class="cmtt-12">application/atom+xml</span>. It specifies the syntax (xml) and
the semantic (atom) of the data. Of course somebody once needed to read the atom
specification and program the client with the knowledge of how to process this media
type. The purpose of standardized media types however is that their number is limited
enough so that there is a fair chance that a client might have implemented a given media
type.
<!--l. 745--><p class="indent" >    Large sites like Google, Facebook or Twitter have the market power to attract developers to
read their specifications and program clients accordingly. They thus don&#8217;t necessary need to rely on
standardized media types. REST however envisions a decentralized web in which parties can
interact without previous knowledge of each other. This becomes possible through the usage of well
known predefined media types.
<a 
 id="x1-19002r22"></a>
<h4 class="subsectionHead"><span class="titlemark">3.2  </span> <a 
 id="x1-200002"></a>Data Models of Media Types</h4>
<!--l. 762--><p class="noindent" >TODO:
      <ul class="itemize1">
      <li class="itemize">Ein generelles Daten Modell wäre hilfreich, um alle Medien Typen darauf zu projezieren
      und mit einer solchen Projektion dann innerhalb der Applikation zu arbeiten (TODO
      Schreier:  warum  muss  dass  Datenmodell  total  allgemeingültig  sein,  reicht  es  nicht
      vielleicht auch für eine Domäne?)
      </li>
                                                                                         
                                                                                         
      <li class="itemize">Ein  allgemeines  Datenmodell  könnte  auch  eine  Hilfe  sein  als  Zwischenschritt  für
      Conversions zwischen Medientypen
      </li>
      <li class="itemize">Es gibt kein allgemeines, sinnvolles Datenmodell für alle Medientypen
      </li>
      <li class="itemize">Trotzdem können bestimmte hilfreiche Generalisierungen vorgenommen werden
           <ul class="itemize2">
           <li class="itemize">Die meisten Resourcen haben bestimmte generische Metadaten die entweder im
           Medientyp kodiert werden können oder mit dem Medientyp zusammen persistiert
           werden müssen
           </li>
           <li class="itemize">Diese Metadaten finden sich auch in atom:entry wieder und sind: Autor, Updated,
           Titel, Summary, etag, id, name, links
           </li>
           <li class="itemize">Transitional               Links               vs               Structural               Links:
           <a 
href="http://java.net/projects/jax-rs-spec/pages/Hypermedia" class="url" ><span 
class="cmtt-12">http://java.net/projects/jax-rs-spec/pages/Hypermedia</span></a>
           </li>
           <li class="itemize">Different categories of data: CSV, binary/plain text, large binary (video), tree
           (XML/JSON) (Referenz?)
           </li></ul>
      </li></ul>
<a 
 id="x1-20001r10"></a>
<h5 class="subsubsectionHead"><span class="titlemark">3.2.1  </span> <a 
 id="x1-210001"></a>XML vs. JSON</h5>
<!--l. 782--><p class="noindent" >This section investigates the two most common syntaxes used by media types and the issues that
arise if an application needs to support both of them.
<!--l. 785--><p class="indent" >    The application section of the IANA mime type registration has 294 entries ending in &#8220;+xml&#8221; and only 3
ending in &#8220;+json&#8221;.<span class="footnote-mark"><a 
href="restful_groupware27.html#fn26x0"><sup class="textsuperscript">26</sup></a></span><a 
 id="x1-21001f26"></a> 
This stands in contrast to the rise of public JSON APIs and the decline of XML
APIs.<span class="footnote-mark"><a 
href="restful_groupware28.html#fn27x0"><sup class="textsuperscript">27</sup></a></span><a 
 id="x1-21002f27"></a> 
<!--l. 794--><p class="indent" >    A strong argument for JSON as the preferred format for public APIs may
be that JSON is a subset of JavaScript and thus easily consumable in a web
browser.<span class="footnote-mark"><a 
href="restful_groupware29.html#fn28x0"><sup class="textsuperscript">28</sup></a></span><a 
 id="x1-21003f28"></a> 
<!--l. 800--><p class="indent" >    A drawback of this mismatch between the preference of media type designers and
API consumers is a possible duplication of work and incompatibilities across different
APIs. An author that wants to offer a public API as JSON is likely to find only an
existing XML media type, but no one in JSON. The situation would be eased, if a
standard mapping from XML schemes to JSON would be possible, but that is not the
case.
<!--l. 807--><p class="indent" >    Instead, possible mappings have to trade of the preservation of all structural information
against the &#8220;friendliness&#8221; of the resulting JSON structure.<span class="cite">[<a 
href="#XBoyer2011">BGM<sup><span 
class="cmr-8">+</span></sup>11</a>]</span> Without going into detail, a
                                                                                         
                                                                                         
JSON structure can be seen as friendly if it makes best use of JSON&#8217;s data types, is compact and
easy to process. <a 
href="#x1-21004r1">Listing&#x00A0;1<!--tex4ht:ref: sec:opensocial --></a> shows two different examples how to map data from XML to JSON with
one of them using JSON number values, being more compact and probably easier to
process.
    <table class="multicols" id="multicols-1"><tr><td class="multicol-1">
    <!--l. 816-->
<a 
 id="x1-21005"></a>
<br /> <div class="caption" 
><span class="id">Listing&#x00A0;1: </span><span  
class="content">XML fragment</span></div><!--tex4ht:label?: x1-21004r --><div class="lstlisting" id="listing-1"><span class="label"><a 
 id="x1-21006r1"></a></span><span 
class="cmmi-12">&#x003C;</span>lang&#x00A0;pref=&#8221;1&#8221;&#x00A0;<br /><span class="label"><a 
 id="x1-21007r2"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;id=&#8221;fr&#8221;&#x00A0;/<span 
class="cmmi-12">&#x003E;</span>&#x00A0;<br /><span class="label"><a 
 id="x1-21008r3"></a></span><span 
class="cmmi-12">&#x003C;</span>lang&#x00A0;pref=&#8221;3&#8221;&#x00A0;<br /><span class="label"><a 
 id="x1-21009r4"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;id=&#8221;en&#8221;&#x00A0;/<span 
class="cmmi-12">&#x003E;</span>
    
    </div>
    </td><td class="multicol-2"><!--l. 825-->
<br /> <div class="caption" 
><span class="id">: </span><span  
class="content">unfriendly JSON</span></div><!--tex4ht:label?: x1-21000 --><div class="lstlisting" id="listing-2"><span class="label"><a 
 id="x1-21010r1"></a></span>&#8221;languages&#8221;:&#x00A0;[&#x00A0;<br /><span class="label"><a 
 id="x1-21011r2"></a></span>&#x00A0;&#x00A0;<span 
class="cmsy-10x-x-120">{</span>&#x00A0;&#8221;id&#8221;:&#8221;fr&#8221;,&#x00A0;<br /><span class="label"><a 
 id="x1-21012r3"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#8221;pref&#8221;:&#8221;1&#8221;&#x00A0;<span 
class="cmsy-10x-x-120">}</span>,&#x00A0;<br /><span class="label"><a 
 id="x1-21013r4"></a></span>&#x00A0;&#x00A0;<span 
class="cmsy-10x-x-120">{</span>&#x00A0;&#8221;id&#8221;:&#8221;en&#8221;,&#x00A0;<br /><span class="label"><a 
 id="x1-21014r5"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#8221;pref&#8221;:&#8221;3&#8221;&#x00A0;<span 
class="cmsy-10x-x-120">}</span>&#x00A0;<br /><span class="label"><a 
 id="x1-21015r6"></a></span>]
    
    </div>
    </td><td class="multicol-3"><!--l. 836-->
<br /> <div class="caption" 
><span class="id">: </span><span  
class="content">friendly JSON</span></div><!--tex4ht:label?: x1-21000 --><div class="lstlisting" id="listing-3"><span class="label"><a 
 id="x1-21016r1"></a></span>&#8221;languages&#8221;:&#x00A0;<span 
class="cmsy-10x-x-120">{</span>&#x00A0;<br /><span class="label"><a 
 id="x1-21017r2"></a></span>&#x00A0;&#x00A0;&#8221;fr&#8221;:1,&#x00A0;<br /><span class="label"><a 
 id="x1-21018r3"></a></span>&#x00A0;&#x00A0;&#8221;en&#8221;:3&#x00A0;<br /><span class="label"><a 
 id="x1-21019r4"></a></span><span 
class="cmsy-10x-x-120">}</span>
    
    </div>
    </td></tr></table>
<!--l. 846--><p class="indent" >    Activity Streams has avoided the misalignment of an official XML format and an
unofficial JSON deviate by defining an XML (ATOM) and JSON format from the
beginning.<span class="footnote-mark"><a 
href="restful_groupware30.html#fn29x0"><sup class="textsuperscript">29</sup></a></span><a 
 id="x1-21020f29"></a> 
<a 
 id="x1-21021r24"></a>
<h5 class="subsubsectionHead"><span class="titlemark">3.2.2  </span> <a 
 id="x1-220002"></a>Hypermedia Support in JSON</h5>
<!--l. 850--><p class="noindent" >TODO: discuss HAL
<a 
 id="x1-22001r23"></a>
<h4 class="subsectionHead"><span class="titlemark">3.3  </span> <a 
 id="x1-230003"></a>vCard, iCalendar, xCard and xCal</h4>
<!--l. 854--><p class="noindent" >TODO:
      <ul class="itemize1">
      <li class="itemize">Textbasierte vs. XML Formate</li></ul>
<!--l. 859--><p class="indent" >    Version 3 of vCard was published in 1998<span class="cite">[<a 
href="#XRFC2425">HSD98</a>]</span> only a few months after the W3C
published Version 1.0 of XML<span class="cite">[<a 
href="#XPaoli:98:XR">PSMB98</a>]</span> and eight years before JSON became an official
standard.<span class="cite">[<a 
href="#XRFC4627">Cro06</a>]</span>
<a 
 id="x1-23001r26"></a>
<h5 class="subsubsectionHead"><span class="titlemark">3.3.1  </span> <a 
 id="x1-240001"></a>Hypermedia Support</h5>
<!--l. 865--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                         
                                                                                         
<a 
 id="x1-240011"></a>
                                                                                         
                                                                                         
<!--l. 887--><p class="noindent" ><object data="restful_groupware-1.svg" width="448.43246 " height="301.17535 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;1: </span><span  
class="content">Hypermedia support in xCard and xCal</span></div><!--tex4ht:label?: x1-240011 -->
                                                                                         
                                                                                         
<!--l. 889--><p class="noindent" ></div><hr class="endfigure">
<!--l. 891--><p class="indent" >    The iCalendar standard defines a several properties that can link to external representations of
the properties value by specifying an &#8220;Alternate Text Representation&#8221; parameter. These are
comment, summary, description, contact, location, resources. The properties attendee and
organizer can have a &#8220;Directory Entry Reference&#8221; parameter that should contain an URI to a
person resource. One property that can not be dereferenced is &#8220;Related To&#8221;: It only contains the
globally unique identifier of another calendar component.
<!--l. 899--><p class="indent" >    One problem that arises with the use of hyperlinks in personal information management is
identification across administrative boundaries. Take for example an event that gets sent from one
organization to another and contains hyperlinks to person representations. These hyperlinks most
likely point to an internal addressbook of the organization and may not be accessible by the
receiver of the event information. The receiver however may have his own addressbook containing
information about the person.
<a 
 id="x1-24002r27"></a>
<h4 class="subsectionHead"><span class="titlemark">3.4  </span> <a 
 id="x1-250004"></a>Derived JSON formats for PIM data</h4>
<!--l. 909--><p class="noindent" >TODO Übereinstimmungen und Unterschiede vCard, portable contacts: Which fields of portable
contacts are derived from vCard: <a 
href="http://wiki.portablecontacts.net/w/page/17776141/schema" class="url" ><tspan font-family="cmtt" font-size="12">http://wiki.portablecontacts.net/w/page/17776141/schema</tspan></a>
<!--l. 911--><p class="indent" >    Calendar Formate nur kurz
<a 
 id="x1-25001r30"></a>
<h4 class="subsectionHead"><span class="titlemark">3.5  </span> <a 
 id="x1-260005"></a>Microformats, Microdata, RDFa</h4>
<!--l. 916--><p class="noindent" >HTML documents are primarily meant to be rendered by browsers and interpreted by humans. It
is hard for a computer to interpret the meaning of text and data included in an HTML document.
Microformats, Microdata and RDFa define ways to add additional meta data to HTML that
allows computers to identify structured data in HTML without having an impact on the
rendering.<span class="cite">[<a 
href="#XTennison2012">Ten12</a>]</span>
<!--l. 922--><p class="indent" >    There is not yet an established term to refer to the three different formats. Practitioners use &#8220;structured
data languages&#8221;<span class="footnote-mark"><a 
href="restful_groupware31.html#fn30x0"><sup class="textsuperscript">30</sup></a></span><a 
 id="x1-26001f30"></a> ,
&#8220;machine-readable data format&#8221;<span class="cite">[<a 
href="#XHickson2011">Hic11a</a>]</span>, &#8220;structured data
markup&#8221;<span class="footnote-mark"><a 
href="restful_groupware32.html#fn31x0"><sup class="textsuperscript">31</sup></a></span><a 
 id="x1-26002f31"></a> 
or just &#8220;structured markup&#8221;. Scientific publications seem to use the term &#8220;Semantic
annotation&#8221;<span class="cite">[<a 
href="#Xinstance7">RGJ05</a>]</span> to refer to HTML with machine readable semantic data. This work will use
the term &#8220;Semantic annotation format&#8221; to refer to Microformats, Microdata, RDFa and similar
formats.
<a 
 id="x1-26003r28"></a>
<h5 class="subsubsectionHead"><span class="titlemark">3.5.1  </span> <a 
 id="x1-270001"></a>Use Cases</h5>
<!--l. 934--><p class="noindent" >One major use case for semantic annotations is to help search engines to better index
the annotated site. The Microformats project was started by a blog search engine
(Technorati)<span class="footnote-mark"><a 
href="restful_groupware33.html#fn32x0"><sup class="textsuperscript">32</sup></a></span><a 
 id="x1-27001f32"></a> 
and the recent schema.org effort came from the three big search engines Google,
Bing and Yahoo. Another use case is demonstrated by the Firefox plugin
&#8220;Operator&#8221;.<span class="footnote-mark"><a 
href="restful_groupware34.html#fn33x0"><sup class="textsuperscript">33</sup></a></span><a 
 id="x1-27002f33"></a> 
                                                                                         
                                                                                         
It allows to extract annotated entities from web pages. A user could thus import contact or
event data from arbitrary web pages in his personal information manager with one
click. Semantic annotations can also be used to make web content accessible to disabled
people.<span class="cite">[<a 
href="#XYesilada:2007:EDS:1279700.1279704">YSHG07</a>]</span>
<!--l. 946--><p class="indent" >    In the context of this work, Semantic annotations could be used inside the <span class="lstinline">summary</span> tag of
Atom entries. A consumer of a feed of contact elements could thus use the data extracted from the
annotated summary data to provide a tabular overview of the entries even without fetching the
associated media resource of the entry.
<!--l. 952--><p class="indent" >    TODO example
<!--l. 954--><p class="indent" >    A third use case is currently under development as part of the European
Union Research Project &#8220;Interactive Knowledge Stack&#8221; (IKS) that builds a
semantic content management stack. The sub-project &#8220;Vienna IKS Editables&#8221;
(VIE)<span class="footnote-mark"><a 
href="restful_groupware35.html#fn34x0"><sup class="textsuperscript">34</sup></a></span><a 
 id="x1-27003f34"></a> 
uses semantic annotations to make content on a web site editable. In a traditional content
management system, content is editable via HTML forms that are available as separate sites in
addition to the normal view. The VIE Javascript library instead searches the HTML document for
semantically annotated entities and dynamically builds editing interfaces for those. A modified entity
can then be sent to the server via AJAX in a format called &#8220;json-ld&#8221; that serializes semantic data to
JSON.<span class="footnote-mark"><a 
href="restful_groupware36.html#fn35x0"><sup class="textsuperscript">35</sup></a></span><a 
 id="x1-27004f35"></a> 
<a 
 id="x1-27005r32"></a>
<h5 class="subsubsectionHead"><span class="titlemark">3.5.2  </span> <a 
 id="x1-280002"></a>Format selection</h5>
<!--l. 970--><p class="noindent" >With at least three different formats, a developer needs to settle on one to
implement.<span class="footnote-mark"><a 
href="restful_groupware37.html#fn36x0"><sup class="textsuperscript">36</sup></a></span><a 
 id="x1-28001f36"></a> 
A first consideration has to be the ability of expected consumers to handle the format, a second
consideration the available tooling to produce a particular format. The different Semantic
annotation formats impose certain requirements for the used HTML dialect. Microformats can be
used with all versions of HTML, RDFa with XHTML or HTML5 and Microdata introduces special
attributes that work only with HTML5.<span class="cite">[<a 
href="#XTennison2012">Ten12</a>]</span>
<!--l. 979--><p class="indent" >    Microdata is part of HTML5 and a standard effort of the
W3C.<span class="cite">[<a 
href="#XHickson2011">Hic11a</a>]</span> It is also backed up by the schema.org effort of Google and
Microsoft.<span class="footnote-mark"><a 
href="restful_groupware38.html#fn37x0"><sup class="textsuperscript">37</sup></a></span><a 
 id="x1-28002f37"></a> 
The schema.org vocabulary in turn has been mapped to the semantic world by researchers working on
linked data.<span class="footnote-mark"><a 
href="restful_groupware39.html#fn38x0"><sup class="textsuperscript">38</sup></a></span><a 
 id="x1-28003f38"></a> 
Thus by using Microdata with the schema.org vocabulary, the data can easily be combined
with other semantic data. The rest of this work therefor concentrates on Microdata.
Many good arguments to also consider RDFa can be found in the blog of Manu
Sporny<span class="footnote-mark"><a 
href="restful_groupware40.html#fn39x0"><sup class="textsuperscript">39</sup></a></span><a 
 id="x1-28004f39"></a> ,
chair of the RDF Web Applications Working Group at the World Wide Web Consortium.
<a 
 id="x1-28005r33"></a>
                                                                                         
                                                                                         
<h5 class="subsubsectionHead"><span class="titlemark">3.5.3  </span> <a 
 id="x1-290003"></a>Producing Semantically annotated HTML</h5>
<!--l. 997--><p class="noindent" >A recent discussion of possibilities to produce semantically annotated HTML pages can be found in
<span class="cite">[<a 
href="#XDBLP:books/daglib/0023755">CDDM09</a>, sec. 9.1.3]</span>. The authors &#8220;discern two different ways in which the Semantic Web plays a
key role in current Web engineering approaches: one is by the creation of Web applications starting
from semantically described data, and the second is by the generation of semantic annotations
from the Web engineering process.&#8221;
<!--l. 1004--><p class="indent" >    In the case of this work only the second way is of interest, since we don&#8217;t assume the data to be
persisted in a semantic model and aim to generate semantic annotations. As an example for this
way the book describes a method developed as part of a larger &#8220;Web Semantics Design Method&#8221;
(WSDM). This method consists of two mappings. The first one is the &#8220;data source mapping
(DSM), which describes exactly how the reference ontology maps to the actual data
source.&#8221; The second mapping uses XPointer expressions to link HTML tags to elements of
the reference ontology from the first mapping. Neither the book nor referenced papers
however go in any more detail about the final step of generating the annotated HTML
tags.
<!--l. 1015--><p class="indent" >    One important point can be learned from the WSDM description. The production of semantically
annotated HTML can become a lot easier if the entity is already available represented with the
targeted vocabulary. A very naive approach to produce annotated HTML would be to just
manually write the necessary attributes in the template and fill them with values from an arbitrary
data object, as demonstrated in listing <a 
href="#x1-29002r2">2<!--tex4ht:ref: fig:naive-microdata-template --></a>. Even with the conciseness of the used template language
Jade<span class="footnote-mark"><a 
href="restful_groupware41.html#fn40x0"><sup class="textsuperscript">40</sup></a></span><a 
 id="x1-29001f40"></a> ,
the developer still has a lot to type.
                                                                                         
                                                                                         
<!--l. 1027--><p class="indent" >    <a 
 id="x1-2900010"></a><hr class="float"><div class="float" 
>
                                                                                         
                                                                                         
<a 
 id="x1-29002r2"></a>
<a 
 id="x1-29003"></a>
<!--l. 1027--><pre class="listings">&#x00A0;<br /><span class="label"><a 
 id="x1-29004r1"></a></span><tspan font-family="cmsy" font-size="10">-</tspan>@&#x00A0;var&#x00A0;vcard:&#x00A0;VCard&#x00A0;<br /><span class="label"><a 
 id="x1-29005r2"></a></span>&#x00A0;<br /><span class="label"><a 
 id="x1-29006r3"></a></span>div(&#x00A0;itemscope&#x00A0;itemtype=<!--l. 1030--><span class="listings-nested">&#8221;http://schema.org/Person&#8221;</span>&#x00A0;<br /><span class="label"><a 
 id="x1-29007r4"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;itemid=#<tspan font-family="cmsy" font-size="10">{</tspan>vcard.getProperty(<!--l. 1031--><span class="listings-nested">&#8221;uid&#8221;</span>)<tspan font-family="cmsy" font-size="10">}</tspan>&#x00A0;)&#x00A0;<br /><span class="label"><a 
 id="x1-29008r5"></a></span>&#x00A0;&#x00A0;span(&#x00A0;itemprop=<!--l. 1032--><span class="listings-nested">&#8221;name&#8221;</span>&#x00A0;)&#x00A0;<br /><span class="label"><a 
 id="x1-29009r6"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;#<tspan font-family="cmsy" font-size="10">{</tspan>vcard.getProperty(<!--l. 1033--><span class="listings-nested">&#8221;fn&#8221;</span>)<tspan font-family="cmsy" font-size="10">}</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-29010r7"></a></span>&#x00A0;&#x00A0;span(&#x00A0;itemprop=<!--l. 1034--><span class="listings-nested">&#8221;telephone&#8221;</span>&#x00A0;)&#x00A0;<br /><span class="label"><a 
 id="x1-29011r8"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;#<tspan font-family="cmsy" font-size="10">{</tspan>vcard.getProperty(<!--l. 1035--><span class="listings-nested">&#8221;tel&#8221;</span>)<tspan font-family="cmsy" font-size="10">}</tspan>
&#x00A0;<br /><span class="label"><a 
 id="x1-29012r9"></a></span></pre>
 <div class="caption" 
><span class="id">Listing&#x00A0;2: </span><span  
class="content">Defining all Microdata attributes manually in an HTML template</span></div><!--tex4ht:label?: x1-29000 -->
                                                                                         
                                                                                         
    </div><hr class="endfloat" />
<!--l. 1038--><p class="indent" >    Compared to the above listing <a 
href="#x1-29013r3">3<!--tex4ht:ref: fig:microdata-template --></a> shows a template using a data structure that is aware of the
used Microdata vocabulary and wraps an instance of a typed Microdata item with its properties.
The <span class="lstinline">scope</span> method of the Microdata interface will add the <span class="lstinline">itemscope</span>, <span class="lstinline">itemtype</span> and
<span class="lstinline">itemid</span> attributes to the nested <span class="lstinline">div</span> element. The <span class="lstinline">prop</span> method either augments a nested
element as shown for the <span class="lstinline">name</span> property or creates the correct nested element. The
method adds the <span class="lstinline">itemprop</span> attribute and puts the value for this property inside the
element.
                                                                                         
                                                                                         
<!--l. 1049--><p class="indent" >    <hr class="float"><div class="float" 
>
                                                                                         
                                                                                         
<a 
 id="x1-29013r3"></a>
<a 
 id="x1-29014"></a>
<!--l. 1049--><pre class="listings">&#x00A0;<br /><span class="label"><a 
 id="x1-29015r1"></a></span><tspan font-family="cmsy" font-size="10">-</tspan>@&#x00A0;var&#x00A0;md:&#x00A0;MicroData&#x00A0;<br /><span class="label"><a 
 id="x1-29016r2"></a></span>&#x00A0;<br /><span class="label"><a 
 id="x1-29017r3"></a></span>=&#x00A0;md.scope&#x00A0;<br /><span class="label"><a 
 id="x1-29018r4"></a></span>&#x00A0;&#x00A0;div&#x00A0;<br /><span class="label"><a 
 id="x1-29019r5"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;md.prop(<!--l. 1054--><span class="listings-nested">&#8221;name&#8221;</span>)&#x00A0;<br /><span class="label"><a 
 id="x1-29020r6"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;span(&#x00A0;style=<!--l. 1055--><span class="listings-nested">&#8221;color:red&#8221;</span>&#x00A0;)&#x00A0;<br /><span class="label"><a 
 id="x1-29021r7"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;md.prop(<!--l. 1056--><span class="listings-nested">&#8221;telephone&#8221;</span>)&#x00A0;<br /><span class="label"><a 
 id="x1-29022r8"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;=&#x00A0;md.prop(<!--l. 1057--><span class="listings-nested">&#8221;email&#8221;</span>)
&#x00A0;<br /><span class="label"><a 
 id="x1-29023r9"></a></span></pre>
 <div class="caption" 
><span class="id">Listing&#x00A0;3: </span><span  
class="content">Using a Microdata-aware data structure in a template</span></div><!--tex4ht:label?: x1-29000 -->
                                                                                         
                                                                                         
    </div><hr class="endfloat" />
<!--l. 1060--><p class="indent" >    An implementation of this approach must take care of a few peculiarities.<span class="cite">[<a 
href="#XHickson2011">Hic11a</a>]</span> Some
properties don&#8217;t necessarily use simple <span class="lstinline">span</span> elements, e.g. dates can be better expressed with <span class="lstinline">time</span>
elements or URI values most likely appear in an <span class="lstinline">a</span>,<span class="lstinline">img</span>,<span class="lstinline">link</span> or <span class="lstinline">object</span> element. Property values
could also be put in a <span class="lstinline">content</span> attribute while the element&#8217;s nested text content is optimized for
human consumption. Items can be nested, e.g. an item of type PostalAddress could be nested
inside a Person item.
<!--l. 1070--><p class="indent" >    A template engine that should be extended as described above should allow to capture and
manipulate nested HTML elements and to call methods of passed in objects.
<a 
 id="x1-29024r31"></a>
<h4 class="subsectionHead"><span class="titlemark">3.6  </span> <a 
 id="x1-300006"></a>HTML Forms</h4>
<!--l. 1076--><p class="noindent" >TODO
<a 
 id="x1-30001r37"></a>
<h4 class="subsectionHead"><span class="titlemark">3.7  </span> <a 
 id="x1-310007"></a>Media Types for Collections</h4>
<!--l. 1083--><p class="noindent" >Vergleich ATOM mit Medientyp Collection+JSON
<!--l. 1085--><p class="indent" >    JSON formats for collections: Collection+JSON Mime-Type (approved in July 2011) by Mike
Amundsen<span class="footnote-mark"><a 
href="restful_groupware42.html#fn41x0"><sup class="textsuperscript">41</sup></a></span><a 
 id="x1-31001f41"></a> 
JSON ATOM serialization implemented by Apache
Abdera<span class="footnote-mark"><a 
href="restful_groupware43.html#fn42x0"><sup class="textsuperscript">42</sup></a></span><a 
 id="x1-31002f42"></a> 
<!--l. 1090--><p class="indent" >    Some problems in loss-less conversion of ATOM to json:<span class="cite">[<a 
href="#XSnell2008">Sne08</a>]</span>
      <ul class="itemize1">
      <li class="itemize">JSON has no equivalent for the xml:lang attribute.
      </li>
      <li class="itemize">Dereferencable IRIs must be transformed to URIs.
      </li>
      <li class="itemize">URIs relative to an xml:base attribute must be resolved, also inside XHTML content
      elements.
      </li>
      <li class="itemize">Repeatable elements must be converted to arrays.
      </li>
      <li class="itemize">The ATOM date format (RFC 3339) differs from the JavaScript Date serialization.
      </li>
      <li class="itemize">ATOM content elements are versatile but should be represented more meaningful in
      JSON then just a plain String.
      </li>
      <li class="itemize">ATOM supports arbitrary extensions via namespaces.</li></ul>
<a 
 id="x1-31003r38"></a>
<h4 class="subsectionHead"><span class="titlemark">3.8  </span> <a 
 id="x1-320008"></a>Media Type conversion</h4>
<!--l. 1105--><p class="noindent" >Konvertieren zwischen verschiedenen Representationen die nach aussen gegeben werden vs.
Konvertieren zwischen äußerer Representation und Representation für die Datenbank.
                                                                                         
                                                                                         
<!--l. 1107--><p class="indent" >    An welchen Punkten in der Architektur muss/kann/soll konvertiert werden?
<a 
 id="x1-32001r39"></a>
<h4 class="subsectionHead"><span class="titlemark">3.9  </span> <a 
 id="x1-330009"></a>Updates with non isomorphic Media Types</h4>
<!--l. 1110--><p class="noindent" >How to handle updates, if the mediatypes are not isomorph?
<!--l. 1112--><p class="indent" >    How does Google handle PATCH in the calendar API?
<!--l. 1114--><p class="indent" >    Schnittmenge der Medientypen identifizieren
<!--l. 1116--><p class="indent" >    Einen kanonischen Medientypen festlegen für Updates?
<!--l. 1118--><p class="indent" >    Erweiterungsmöglichkeiten v. Medientypen nutzen um Isomorphie herzustellen
<a 
 id="x1-33001r21"></a>
<h3 class="sectionHead"><span class="titlemark">4  </span> <a 
 id="x1-340004"></a>Design</h3>
<a 
 id="x1-34001r40"></a>
<h4 class="subsectionHead"><span class="titlemark">4.1  </span> <a 
 id="x1-350001"></a>Overview</h4>
<a 
 id="x1-35001r42"></a>
<h4 class="subsectionHead"><span class="titlemark">4.2  </span> <a 
 id="x1-360002"></a>Reusable Patterns and Components</h4>
<!--l. 1141--><p class="noindent" >Reuse is of course in general a good thing. In the context of Model Driven Development (MDD)
and code generation it is especially import to identify code that is general enough to be provided
by a library of framework and does not need to be generated.
<!--l. 1146--><p class="indent" >    Minimizing the generated code also minimizes the extend of drawbacks associated with code
generation, most importantly conflicts between updates by the code generator and manual
modification.
<!--l. 1157--><p class="indent" >    Concerns regarding Media Types that needs to be implemented differently for each different
Media Type:
      <ul class="itemize1">
      <li class="itemize">validate the Media Type
      </li>
      <li class="itemize">provide accessors to read, write parts of the Media Type
      </li>
      <li class="itemize">serialize, deserialize the whole Media Type
      </li>
      <li class="itemize">converters to other formats
      </li>
      <li class="itemize">accessors to common interfaces (projection), e.g. common generic resource attributes
      or common attributes of a contact</li></ul>
<!--l. 1169--><p class="indent" >    Candidate areas for re-usability:
      <ul class="itemize1">
      <li class="itemize">link building, URL parsing
      </li>
      <li class="itemize">HTML form building, parsing
      </li>
      <li class="itemize">generic properties of resources, id
      </li>
      <li class="itemize">resource types
                                                                                         
                                                                                         
      </li>
      <li class="itemize">question to storage: does resource still match ETag? Has changed since?
      </li>
      <li class="itemize">all links of a resource: Link: intern/extern/undefined, href, rel, title, text, media type
      </li>
      <li class="itemize">bool function matchesMediaType(), getMediaType() auf WrappedEntry
      </li>
      <li class="itemize">Prüfung, ob ein Update durchgeführt werden soll, gemäß ETAG, ifnotchanged
      </li>
      <li class="itemize">Möglichkeit,  DatenKlassen  mit  DatenTypen  zu  definieren  wie  in  eZ  Publish  um
      automatische Views und Edit Ansichten zu ermöglichen.
      </li>
      <li class="itemize">Creation  of  resources:  POST  to  collection  with  SLUG  Header,  PUT  to  URI,
      normalization of SLUG Header
      </li>
      <li class="itemize">Pagination  (building  and  parsing  of  next  and  previous  URIs,  implementation  of
      RFC5005), querying the collections entries provider with the correct parameters (offset,
      limit).
      </li>
      <li class="itemize">Storage interface with transaction support. An application may for example need to
      notify an indexing component after some resource has been changed. &#8211; No transaction
      support: Every action that must happen in a transaction together with the resource
      change must be handled by the storage layer, must be aware of the storage technologie.</li></ul>
<a 
 id="x1-36001r43"></a>
<h4 class="subsectionHead"><span class="titlemark">4.3  </span> <a 
 id="x1-370003"></a>Interactions</h4>
<a 
 id="x1-37001r34"></a>
<h5 class="subsubsectionHead"><span class="titlemark">4.3.1  </span> <a 
 id="x1-380001"></a>Discovery of Collections</h5>
<!--l. 1192--><p class="noindent" >An ideal Rest API is accessed by one main URI and all other resources can be discovered by
following links. A useful Media type to discover available collections is the Atom Service
Document.<span class="cite">[<a 
href="#XRFC5023">Gh07</a>, sec. 8]</span> It contains links to collections organized in workspaces and annotated
with meta data.
<!--l. 1197--><p class="indent" >    A Groupware client most likely needs to discern the available collections by the contained
resources as to consume and present them with the appropriate user interfaces for contacts,
calendar data, etc. A first idea could be to use the Media types declared in the &#8220;accept&#8221; tag of a
collection to identify types of collections. However the specification explicitly states that this tag
&#8220;specifies a type of representation that can be POSTed to a Collection&#8221;. If a collection
can only be read then no accept tag should be present and thus also not available for
interpretation.
                                                                                         
                                                                                         
<!--l. 1208--><p class="indent" >    <a 
 id="x1-3800015"></a><hr class="float"><div class="float" 
>
                                                                                         
                                                                                         
<a 
 id="x1-38001r4"></a>
<a 
 id="x1-38002"></a>
<!--l. 1208--><pre class="listings">&#x00A0;<br /><span class="label"><a 
 id="x1-38003r1"></a></span><tspan font-family="cmmi" font-size="12">&#x003C;</tspan>atom:category&#x00A0;scheme=<!--l. 1209--><span class="listings-nested">&#8221;http://schemas.google.com/g/2005#kind&#8221;</span>&#x00A0;<br /><span class="label"><a 
 id="x1-38004r2"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;term=<!--l. 1210--><span class="listings-nested">&#8221;http://schemas.google.com/g/2005#contact&#8221;</span>&#x00A0;/<tspan font-family="cmmi" font-size="12">&#x003E;</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-38005r3"></a></span>&#x00A0;<br /><span class="label"><a 
 id="x1-38006r4"></a></span><tspan font-family="cmmi" font-size="12">&#x003C;</tspan>atom:category&#x00A0;scheme=<!--l. 1212--><span class="listings-nested">&#8221;http://ibm.com/oa/type&#8221;</span>&#x00A0;<br /><span class="label"><a 
 id="x1-38007r5"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;term=<!--l. 1213--><span class="listings-nested">&#8221;task&#8221;</span>&#x00A0;/<tspan font-family="cmmi" font-size="12">&#x003E;</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-38008r6"></a></span>&#x00A0;<br /><span class="label"><a 
 id="x1-38009r7"></a></span><tspan font-family="cmmi" font-size="12">&#x003C;</tspan>atom:category&#x00A0;scheme=<!--l. 1215--><span class="listings-nested">&#8221;http://www.w3.org/2005/Atom/Entry<tspan font-family="cmsy" font-size="10">-</tspan>Kind&#8221;</span>&#x00A0;<br /><span class="label"><a 
 id="x1-38010r8"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;term=<!--l. 1216--><span class="listings-nested">&#8221;http://schemas.google.com/g/2005#contact&#8221;</span>&#x00A0;<br /><span class="label"><a 
 id="x1-38011r9"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<tspan font-family="cmbx" font-size="12">label</tspan>=<!--l. 1217--><span class="listings-nested">&#8221;Contact&#8221;</span>&#x00A0;/<tspan font-family="cmmi" font-size="12">&#x003E;</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-38012r10"></a></span>&#x00A0;<br /><span class="label"><a 
 id="x1-38013r11"></a></span><tspan font-family="cmmi" font-size="12">&#x003C;</tspan>atom:category&#x00A0;scheme=<!--l. 1219--><span class="listings-nested">&#8221;http://www.w3.org/2005/Atom/Entry<tspan font-family="cmsy" font-size="10">-</tspan>Kind&#8221;</span>&#x00A0;<br /><span class="label"><a 
 id="x1-38014r12"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;term=<!--l. 1220--><span class="listings-nested">&#8221;http://ibm.com/oa/type#task&#8221;</span>&#x00A0;<br /><span class="label"><a 
 id="x1-38015r13"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<tspan font-family="cmbx" font-size="12">label</tspan>=<!--l. 1221--><span class="listings-nested">&#8221;Task&#8221;</span>&#x00A0;/<tspan font-family="cmmi" font-size="12">&#x003E;</tspan>
&#x00A0;<br /><span class="label"><a 
 id="x1-38016r14"></a></span></pre>
 <div class="caption" 
><span class="id">Listing&#x00A0;4: </span><span  
class="content">ATOM categories as used by Google and IBM to mark entry types and a proposal
to use a standard scheme URI for type terms</span></div><!--tex4ht:label?: x1-38000 -->
                                                                                         
                                                                                         
    </div><hr class="endfloat" />
<!--l. 1224--><p class="indent" >    A standard conform approach is demonstrated by Google&#8217;s Data
Protocol<span class="footnote-mark"><a 
href="restful_groupware44.html#fn43x0"><sup class="textsuperscript">43</sup></a></span><a 
 id="x1-38017f43"></a>  and by an
internal project at IBM<span class="footnote-mark"><a 
href="restful_groupware45.html#fn44x0"><sup class="textsuperscript">44</sup></a></span><a 
 id="x1-38018f44"></a> .
Both use atom categories<span class="cite">[<a 
href="#XRFC5023">Gh07</a>, sec. 8.3.6]</span> to mark the type of atom entries. James Snell proposed
a standard URI to identify the semantic of categories<span class="footnote-mark"><a 
href="restful_groupware45.html#fn44x0"><sup class="textsuperscript"><a 
href="#x1-38018f44">44<!--tex4ht:ref: snellatomcategory --></a></sup></a></span> but no follow up to this could be found.
The use of categories to attach arbitrary meaning, e.g &#8220;event type (product or promotion), and its
status (new, updated, or cancelled)&#8221; to feeds and entries is also recommended in <span class="cite">[<a 
href="#XWebber2010">Web10</a>, p.
200]</span>.
<!--l. 1235--><p class="indent" >    To make categories usable for a common Groupware API, the server needs to use a categorization
scheme understood by the client. If different clients don&#8217;t agree on one scheme the server could still support
several.<span class="footnote-mark"><a 
href="restful_groupware46.html#fn45x0"><sup class="textsuperscript">45</sup></a></span><a 
 id="x1-38019f45"></a> 
<!--l. 1241--><p class="indent" >    An alternative Media Type to Service Documents in JSON could not be found. The most
promising approach seems to list available collections in a <span class="lstinline">application/vnd.collection+json</span>
representation. (<a 
href="#x1-310007">subsection&#x00A0;3.7<!--tex4ht:ref: fig:microdata-template --></a>)
<a 
 id="x1-38020r45"></a>
<h5 class="subsubsectionHead"><span class="titlemark">4.3.2  </span> <a 
 id="x1-390002"></a>personalized Service Documents</h5>
<!--l. 1245--><p class="noindent" >For a Groupware that manages confidential information it would make sense to provide personalized
Service Documents for authenticated users that list only collections that the user is authorized to
read.<span class="footnote-mark"><a 
href="restful_groupware47.html#fn46x0"><sup class="textsuperscript">46</sup></a></span><a 
 id="x1-39001f46"></a> 
Personalized Service Documents for different users should have different URIs to make them
cacheable and to acknowledge that each personalized Service Document is indeed an
individual entity. This however conflicts with the previous goal of using one unique
Service Document URI as entrance to the API. A solution would be to require the user to
authenticate when requesting the unique entrance URI and to answer with a HTTP code
&#8220;307 Temporary Redirect&#8221; to the user&#8217;s personalized Service Document after successful
authentication.<span class="footnote-mark"><a 
href="restful_groupware48.html#fn47x0"><sup class="textsuperscript">47</sup></a></span><a 
 id="x1-39002f47"></a> 
<a 
 id="x1-39003r47"></a>
<h5 class="subsubsectionHead"><span class="titlemark">4.3.3  </span> <a 
 id="x1-400003"></a>Atom Publishing Protocol</h5>
<!--l. 1269--><p class="noindent" >The idea to not only use Service Documents but the complete Atom Publishing
Protocol as the foundation for a Groupware API is not novel. Rob Yates
described this idea under the titles &#8220;CalAtom&#8221; and &#8220;CardAtom&#8221; already in
2006<span class="footnote-mark"><a 
href="restful_groupware49.html#fn48x0"><sup class="textsuperscript">48</sup></a></span><a 
 id="x1-40001f48"></a> .
<!--l. 1274--><p class="indent" >    The CalAtom<span class="cite">[<a 
href="#Xdraft-yates-atompub-calatom-00.txt">Yat07</a>]</span> proposal uses a &#8220;features&#8221; tag and associated IANA registry to mark
                                                                                         
                                                                                         
collection types and their features. But the examples of category usage above (<a 
href="#x1-380001">subsubsection&#x00A0;4.3.1<!--tex4ht:ref: fig:microdata-template --></a>)
and the availability of OpenSearch for time range searches (<a 
href="#x1-440007">subsubsection&#x00A0;4.3.7<!--tex4ht:ref: fig:microdata-template --></a>) provide
confidence that a new tag is not required. The features tag was proposed in 2007 by <span class="cite">[<a 
href="#Xdraft-snell-atompub-feature">Sne07</a>]</span> but
did not become a standard.
<!--l. 1282--><p class="indent" >    The Atom format is also used by the Google Data Protocol to publish contacts, events and other
data types<span class="footnote-mark"><a 
href="restful_groupware50.html#fn49x0"><sup class="textsuperscript">49</sup></a></span><a 
 id="x1-40002f49"></a> .
Google&#8217;s use of Atom however is a bit special. The resource data is not included in the content tag of an
entry. Instead a new namespace is used to put the data with additional tags directly inside the entry
tag<span class="footnote-mark"><a 
href="restful_groupware51.html#fn50x0"><sup class="textsuperscript">50</sup></a></span><a 
 id="x1-40003f50"></a> .
<a 
 id="x1-40004r48"></a>
<h5 class="subsubsectionHead"><span class="titlemark">4.3.4  </span> <a 
 id="x1-410004"></a>Synchronizing Collections</h5>
<!--l. 1295--><p class="noindent" >If a Groupware client can synchronize an entire collection to its local memory, then there is no
need for more sophisticated queries that provide only a subset of the collection. The client can
answer all queries from its local copy of the collection.
<!--l. 1300--><p class="indent" >    In <a 
href="#x1-130004">subsection&#x00A0;2.4<!--tex4ht:ref: fig:microdata-template --></a> it has been shown that the time necessary to synchronize a full
collection is under one minute in most cases. This should be acceptable for an initial
synchronization that is only done once on rare occasions when a desktop machine or mobile device
is first used. If subsequent synchronizations only transfer a few resources, that have
changed since the last synchronization then such updates can be made in the order of a
second.
<!--l. 1307--><p class="indent" >    All client scenarios except of a Web Browser client that is used only once, can profit from the
above scenario. In such a case other interaction patterns need to be used (<a 
href="#x1-440007">subsubsection&#x00A0;4.3.7<!--tex4ht:ref: fig:microdata-template --></a>).
<!--l. 1311--><p class="indent" >    The Atom Publishing Protocol identifies collections of resources as Atom Feeds. Feeds can also
be used to synchronize collections. The necessary ingredients are the link relation &#8220;next&#8221;<span class="cite">[<a 
href="#XRFC5005">Not07</a>]</span>,
the concept of a &#8220;deleted entry&#8221;<span class="cite">[<a 
href="#Xdraft-snell-atompub-tombstones-14">Sne12</a>]</span> and the prerequisite that the feed entries must &#8220;be ordered
by their &#8221;app:edited&#8221; property, with the most recently edited Entries coming first in the document
order&#8221;<span class="cite">[<a 
href="#XRFC5023">Gh07</a>, sec. 10]</span>.
<!--l. 1319--><p class="indent" >    The API server design has the notion of a logical feed that can be split up in multiple real
Atom feeds linked with the relation &#8220;next&#8221;. Updated or new entries are always inserted as first
element of the first feed since their &#8220;app:edited&#8221; property is the most recent. Inserting a new entry
at the top of a feed can lead to entries at the end of the feed being pushed to the subsequent feed.
This push needs to be atomic such that a client loading subsequent feeds may see an entry twice,
at the end of a previous feed and the top of the next feed, but will never miss an entry in this
scenario.
<!--l. 1328--><p class="indent" >    In the case of an initial synchronization, the client loads the initial feed and all subsequent
feeds linked with the &#8220;next&#8221; relation and adds all Resources associated with the feeds entries to its
local storage. Resources can either be included completely in the content tag of an entry or be
linked to by the entry. The client memorizes the &#8220;app:edited&#8221; value of the first entry of the first
feed for subsequent synchronizations.
<!--l. 1335--><p class="indent" >    It is possible, that the collection has been modified during the synchronization. Therefor the
client should directly conclude with an update synchronization. This means that the client
starts again to load the first feed and applies all updates until it sees an entry with an
&#8220;app:edited&#8221; value older then the one memorized from the last synchronization. It is possible
that the client must follow several &#8220;next&#8221; links or even load all feeds in the extreme
case.
<!--l. 1343--><p class="indent" >    If the client followed a &#8220;next&#8221; link during a synchronization then it will make sure at the end
                                                                                         
                                                                                         
of the synchronization that the first feed has not changed meanwhile most probably with a
conditional GET request. After this last request indicates no further changes the client knows that
its local collection is in the state of the servers location at the time of the last GET
request.
<a 
 id="x1-41001r49"></a>
<h5 class="subsubsectionHead"><span class="titlemark">4.3.5  </span> <a 
 id="x1-420005"></a>Media Entries and the content tag</h5>
<!--l. 1352--><p class="noindent" >The Atom format provides the opportunity to include a full representation of a resource in the
content tag of an entry.<span class="cite">[<a 
href="#XRFC4287">NS05</a>, sec. 4.1.3]</span> It is thus possible to embed complete xCard or xCal
resources in the Atom feed and so to relieve the client from issuing many GET requests for each
individual resource.
<!--l. 1358--><p class="indent" >    The benefit of saved GET requests must be balanced with the possible disadvantage of serving
the client resource representations already seen. A client that does regular updates may probably
be interested only in the first one or two entries of a feed while the server might have made the
effort to produce tens of entries.
<!--l. 1364--><p class="indent" >    On the other hand the Atom Format mandates that an entry without embedded content must
provide a summary element. It may not make much of a difference in bandwidth and processing
whether a summary is produced or the full content is provided.
<!--l. 1369--><p class="indent" >    Different optimization strategies are possible here, e.g.
      <ul class="itemize1">
      <li class="itemize">The first feed in a sequence of paged feeds could contain only very few entries to
      optimize for regular updates and have more entries in all following feeds.
      </li>
      <li class="itemize">The server could remember the entries already consumed by an authenticated client
      and serve only new entries in the first feed.</li></ul>
<!--l. 1379--><p class="indent" >    In any case it is mandatory that a client can handle embedded content as well as linked
content.
<a 
 id="x1-42001r50"></a>
<h5 class="subsubsectionHead"><span class="titlemark">4.3.6  </span> <a 
 id="x1-430006"></a>Modifying Resources</h5>
<!--l. 1384--><p class="noindent" >Editing, Updating and Deleting of media entries is specified in the Atom Publishing Protocol and
is useful for this work without modifications or additions. Two aspects however are worth to be
highlighted.
<!--l. 1388--><p class="indent" >    As outlined in <a 
href="#x1-420005">subsubsection&#x00A0;4.3.5<!--tex4ht:ref: fig:microdata-template --></a> it is possible to include full representations of the
collection resources in the content tag of an entry. A client however is not allowed to use
an embedded resource representation as the base for an update.<span class="cite">[<a 
href="#XRFC5023">Gh07</a>, sec. 10]</span> If the
client has not yet retrieved the resource from its own URI it thus &#8220; SHOULD perform
a GET on the URI of the Member Entry before editing it.&#8221;[Ibid.] This limitation is
consequent since the Atom feed does not contain an ETag for an embedded resource. A
client thus can not make a conditional PUT request only from the information in the
feed.<span class="footnote-mark"><a 
href="restful_groupware52.html#fn51x0"><sup class="textsuperscript">51</sup></a></span><a 
 id="x1-43001f51"></a> 
<!--l. 1399--><p class="indent" >    The second aspect concerns offline editing. A client should offer the user the possibility to
create, update and delete resources while being offline and to apply this modifications during the
next synchronization, much like the IMAP protocol used by Kolab. This requirement is trivial to
fulfill as long as no concurrent edits happen on the server site. In that case the client needs to
perform an automated or user assisted merge of the conflicting resources. The client should always
preserve a copy of a resource version as last seen from the Server to be able to perform a
three-way-merge.
                                                                                         
                                                                                         
<!--l. 1408--><p class="indent" >    The problem of offline edits and conflicts is thus similar to the case of a failed conditional
PUT request due to a concurrent edit. <span class="cite">[<a 
href="#XNielsen1999">NL99</a>]</span> describes this case and resolutions in
detail.
<a 
 id="x1-43002r51"></a>
<h5 class="subsubsectionHead"><span class="titlemark">4.3.7  </span> <a 
 id="x1-440007"></a>Special Reports, Queries, Search</h5>
<!--l. 1415--><p class="noindent" >In few cases it may not be feasible for a client to synchronize a full collection, e.g. due to low
bandwidth. This section explores restful ways to let the client request only a subset (selection) of a
collection. More specifically the client should be informed about possible query facilities without
relying on out-of-band information.
<!--l. 1421--><p class="indent" >    A promising approach is to use the de-facto standard OpenSearch<span class="cite">[<a 
href="#XClinton">Cli</a>]</span>. According to its
homepage it is implemented by most major browsers, search engines and many other sites.
OpenSearch is also recommended for the link type &#8220;search&#8221; in the HTML5 standard<span class="cite">[<a 
href="#XHickson2011a">Hic11b</a>,
sec. 4.12.4.12]</span>. The default format of an OpenSearch result list is an Atom (or RSS)
feed.
<!--l. 1428--><p class="indent" >    OpenSearch defines the (not yet IANA registered) media type application/opensearchdescription+xml,
which provides necessary information for a client to perform queries against a search service. Since possible
search queries are usually unlimited it is not possible anymore to provide a set of static links. Instead
the server provides an &#8220;URI Template&#8221;<span class="cite">[<a 
href="#XGregorio2012">GFH<sup><tspan font-family="cmr" font-size="8">+</tspan></sup>12</a>]</span> that instructs the client how to perform an &#8220;URI
construction&#8221;<span class="footnote-mark"><a 
href="restful_groupware53.html#fn52x0"><sup class="textsuperscript">52</sup></a></span><a 
 id="x1-44001f52"></a> .
<!--l. 1437--><p class="indent" >    The basic OpenSearch standard defines a simple full text search. Thus a user could search
contacts by name, address or any other field value. Equally events, todo items or notes could be
searched by keywords.
<!--l. 1441--><p class="indent" >    The next important use case is to show calendar events in a given interval, e.g. to present the
events for a month, week or day. This can be achieved with the OpenSearch Time extension that
provides the temporal start and end parameters. Rob Yates CalAtom<span class="cite">[<a 
href="#Xdraft-yates-atompub-calatom-00.txt">Yat07</a>]</span> proposal included a
similar time range search as the only but mandatory special report.
<!--l. 1447--><p class="indent" >    Probably useful might be the OpenSocial Geo extension. It could allow to search contacts or events
in a given geographic region. Even more search types become possible with the SRU extension that
wraps the &#8220;Search/Retrieval via URL&#8221; standard with its &#8220;Contextual Query Language&#8221;
(CQL)<span class="footnote-mark"><a 
href="restful_groupware54.html#fn53x0"><sup class="textsuperscript">53</sup></a></span><a 
 id="x1-44002f53"></a> .
The latter provides the possibility to sort result sets which might be interesting to present an
address book sorted by names.
<!--l. 1455--><p class="indent" >    Search result Atom feeds can make use of annotated HTML (<a 
href="#x1-260005">subsection&#x00A0;3.5<!--tex4ht:ref: fig:microdata-template --></a>) in the summaries
of entries and should not embed full resources in the content tag. Thus the client can still provide a
structured view of the data, like calendar views or a tabular contacts list without the need to
transfer full representations.
<!--l. 1461--><p class="indent" >    The OpenSearch specification suggests that links to the OpenSearch Description Document for
an Atom feed might be added inside a feed tag. There is however no reason not to add such a link
inside the collection tag of a Service Document. This allows a client to directly search a collection
without the need to get the feed first.
<a 
 id="x1-44003r44"></a>
<h4 class="subsectionHead"><span class="titlemark">4.4  </span> <a 
 id="x1-450004"></a>Components</h4>
<a 
 id="x1-45001r52"></a>
<h5 class="subsubsectionHead"><span class="titlemark">4.4.1  </span> <a 
 id="x1-460001"></a>Dispatcher</h5>
<!--l. 1476--><p class="noindent" >The dispatcher selects the Java method (see <a 
href="#x1-48001r1">4.4.3.1<!--tex4ht:ref: sec:components-actions --></a>) that should handle the request. The selection
can depend at least on the path component of the requested URI, the media types
                                                                                         
                                                                                         
accepted by the client as indicated in the request&#8217;s ACCEPT header and the HTTP
verb.
<!--l. 1481--><p class="indent" >    Every project implementing JAX-RS<span class="cite">[<a 
href="#XJAX-RS1.1">HS09</a>]</span> needs to have some kind of dispatcher component.
The specification itself does not identify this component. It does however specify the algorithm a
dispatcher needs to follow and a set of Java annotations which must be used to configure the
dispatch. These annotations (PATH, GET for the HTTP verb and Produces) are demonstrated in
listing <a 
href="#x1-46001r5">5<!--tex4ht:ref: fig:jaxrs-annotated-resource-example --></a>.
                                                                                         
                                                                                         
<!--l. 1489--><p class="indent" >    <a 
 id="x1-4600012"></a><hr class="float"><div class="float" 
>
                                                                                         
                                                                                         
<a 
 id="x1-46001r5"></a>
<a 
 id="x1-46002"></a>
<!--l. 1489--><pre class="listings">&#x00A0;<br /><span class="label"><a 
 id="x1-46003r1"></a></span>@Path(<!--l. 1490--><span class="listings-nested">&#8221;atm/<tspan font-family="cmsy" font-size="10">{</tspan>cardId<tspan font-family="cmsy" font-size="10">}</tspan>&#8221;</span>)&#x00A0;<br /><span class="label"><a 
 id="x1-46004r2"></a></span><tspan font-family="cmbx" font-size="12">public</tspan>&#x00A0;<tspan font-family="cmbx" font-size="12">class</tspan>&#x00A0;AtmResource&#x00A0;<tspan font-family="cmsy" font-size="10">{</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-46005r3"></a></span>&#8216;&#x00A0;<br /><span class="label"><a 
 id="x1-46006r4"></a></span>&#x00A0;&#x00A0;@GET&#x00A0;<br /><span class="label"><a 
 id="x1-46007r5"></a></span>&#x00A0;&#x00A0;@Path(<!--l. 1494--><span class="listings-nested">&#8221;balance&#8221;</span>)&#x00A0;<br /><span class="label"><a 
 id="x1-46008r6"></a></span>&#x00A0;&#x00A0;@Produces(<!--l. 1495--><span class="listings-nested">&#8221;text/plain&#8221;</span>)&#x00A0;<br /><span class="label"><a 
 id="x1-46009r7"></a></span>&#x00A0;&#x00A0;<tspan font-family="cmbx" font-size="12">public</tspan>&#x00A0;String&#x00A0;balance(@PathParam(<!--l. 1496--><span class="listings-nested">&#8221;cardId&#8221;</span>)&#x00A0;String&#x00A0;card,&#x00A0;<br /><span class="label"><a 
 id="x1-46010r8"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;@QueryParam(<!--l. 1497--><span class="listings-nested">&#8221;pin&#8221;</span>)&#x00A0;String&#x00A0;pin)&#x00A0;<tspan font-family="cmsy" font-size="10">{</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-46011r9"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;<tspan font-family="cmbx" font-size="12">return</tspan>&#x00A0;Double.toString(getBalance(card,&#x00A0;pin));&#x00A0;<br /><span class="label"><a 
 id="x1-46012r10"></a></span>&#x00A0;&#x00A0;<tspan font-family="cmsy" font-size="10">}</tspan>
&#x00A0;<br /><span class="label"><a 
 id="x1-46013r11"></a></span></pre>
 <div class="caption" 
><span class="id">Listing&#x00A0;5: </span><span  
class="content">Example of a JAX-RS annotated Resource class (by Marek Potociar)</span></div><!--tex4ht:label?: x1-46000 -->
                                                                                         
                                                                                         
    </div><hr class="endfloat" />
<!--l. 1502--><p class="indent" >    Alternative approaches to configure the dispatcher are not designated by JAX-RS. One
possible alternative would be to expose an API to manually add dispatch routes at runtime and
remove the corresponding annotations from the source code.
<!--l. 1507--><p class="indent" >    This approach is indeed implemented e.g. by
Restlet<span class="footnote-mark"><a 
href="restful_groupware55.html#fn54x0"><sup class="textsuperscript">54</sup></a></span><a 
 id="x1-46014f54"></a> ,
Apache Wink<span class="footnote-mark"><a 
href="restful_groupware56.html#fn55x0"><sup class="textsuperscript">55</sup></a></span><a 
 id="x1-46015f55"></a> 
and probably others. Jersey 2.0 is also expected to provide an API for the
dispatcher.<span class="footnote-mark"><a 
href="restful_groupware57.html#fn56x0"><sup class="textsuperscript">56</sup></a></span><a 
 id="x1-46016f56"></a> :
<!--l. 1515--><p class="indent" >    Advantages of a dynamic dispatcher configuration would be:
      <ul class="itemize1">
      <li class="itemize">The path under which a resource type is served is decoupled from the code defining the
      behavior of the resource. This could enable the reuse of resource classes or methods in
      other contexts.
      </li>
      <li class="itemize">The decision which media types can be consumed or produced may not depend solely
      on the resource class or method. A resource method may work on a domain specific
      data type and the set of supported media types may depend on the available converter
      between media types and the data type. A photo album for example resource may be
      able to consume any number of different image formats that a separate component can
      convert to an internal image representation.
      </li>
      <li class="itemize">The list of supported media types could be created programmatically. This enables
      reuse of set of equivalent media types or combination of media type categories for
      example to combine the sets of image, video and audio media types.
      </li>
      <li class="itemize">The concept of resource classes could be replaced altogether. The life cycle of a resource
      class in JAX-RS defaults to the request scope. During one request only one resource
      method is called. Resource methods therefor by default don&#8217;t share state through
      resource class attributes. It would therefor be possible to bind individual functors to
      dispatcher routes and thus composing the equivalent of a resource class at runtime.</li></ul>
<!--l. 1539--><p class="indent" >    TODO:
<!--l. 1541--><p class="indent" >    The dispatching as defined in JAX-RS does not define any facility for a resource method to
decline its possibility to handle a method at runtime. Such a facility could either be
implemented by a boolean precondition method associated with the resource method or by a
special Exception type that would restart the request dispatch but this time ignoring the
method that threw the exception. If no alternative request method could be found, the
Exception would be propagated and subsequently transformed into an appropriate error
response.
<!--l. 1549--><p class="indent" >    Thus it would be possible to define generic and special purpose request methods
even for cases where the static JAX-RS dispatch algorithm does not provide sufficient
granularity.
                                                                                         
                                                                                         
<!--l. 1553--><p class="indent" >    While all this flexibility can provide many advantages it has to be kept in mind how the
framework can gather enough knowledge to still help by autogenerating e.g. WADL documents and
responses to HEAD and OPTION requests.
<a 
 id="x1-46017r54"></a>
<h5 class="subsubsectionHead"><span class="titlemark">4.4.2  </span> <a 
 id="x1-470002"></a>Resource Facades</h5>
<!--l. 1559--><p class="noindent" >Fielding discerns between a resource and the representation of a resource in a certain format,
&#8220;selected dynamically based on the capabilities or desires of the recipient and the nature of the
resource&#8221;.<span class="cite">[<a 
href="#XFielding2000">Fie00</a>, p. 87]</span> According to this notion, the media type used to represent a resource
should not influence the processing logic. In an ideal case all possible media types should be
handled by the same resource method.
<!--l. 1566--><p class="indent" >    This ideal contrasts with JAX-RS concepts where the media type can be one parameter of the
dispatcher logic. This section outlines a pattern tentatively named &#8220;Resource Facades&#8221; that should
make it easier to handle different media types with the same code and thus to facilitate code
reuse.
<!--l. 1571--><p class="indent" >    A resource method should contain the programming logic executed to serve a request of a
specific type (e.g. GET, PUT) against a specific resource. The programming logic could execute
common tasks like the following:
      <ul class="itemize1">
      <li class="itemize">validate the correctness of a submitted resource
      </li>
      <li class="itemize">check the clients authorization
      </li>
      <li class="itemize">persist the submitted resource data
      </li>
      <li class="itemize">trigger notifications containing a summary of the resource
      </li>
      <li class="itemize">submit the submitted resource to an indexing system
      </li>
      <li class="itemize">check the submitted resource to be of a certain accepted domain type, like contact,
      event, todo item or any set of such types</li></ul>
<!--l. 1585--><p class="indent" >    All the above processing tasks should in theory be independent of the media type of a resource
and only be programmed once to work on any resource format. This could be made possible by
applying the concept of roles to resources. Roles have been described already 15 years ago by
<span class="cite">[<a 
href="#XFowler1997">Fow97</a>]</span> or a bit later by <span class="cite">[<a 
href="#XBaeumer2000">BRSW00</a>]</span>. However no evidence could be found whether roles have been
used to implement restful systems.
<!--l. 1592--><p class="indent" >    According to <span class="cite">[<a 
href="#XSteimann2008">Ste08</a>]</span>, there exists several definitions for roles which mostly share a few core
properties:
      <div class="quote">
      <!--l. 1596--><p class="noindent" >This includes the property that a single object can play several roles of different
      or the same kind both simultaneously and sequentially, and that the same role
      can be played by different objects of the same and different kinds. Raised to the
      type level, this means that the relationship between role types and class types
      (as sources of role players) is generally m:n.</div>
                                                                                         
                                                                                         
<!--l. 1603--><p class="indent" >    A popular example for roles is a person, that can have the different roles over their lifetime
(student, professor, single, husband, widower) or in different contexts (teacher, father, husband,
customer, politician).
<!--l. 1610--><p class="indent" >    Exemplified with the above tasks, a resource can have the role of being validated,
persisted, summarized or checked for being of a certain type. So like in the above quote a
facility is needed that can provide m different roles of resources that come in n different
shapes.
<!--l. 1615--><p class="indent" >    It can be noted, that unlike in the previous example with roles of a person, this resource roles
examples do not extend the original resource with new attributes. A person surely gets additional
attributes as a father (references to children) or professor (member of faculty). Thus the term
&#8220;facade&#8221; in favor of role should indicate that only different views of the same data are
provided.
<!--l. 1621--><p class="indent" >    Listing <a 
href="#x1-47001r6">6<!--tex4ht:ref: fig:datafacades-api --></a> shows interfaces of a minimal framework to provide Facades for Resources. The idea
is, that any code that needs information from a Resource requests the appropriate Facade from the
ResourceHandler. The ResourceHandler was instantiated with a FacadeRegistry from which it can
request Factories for requested Facades. A ResourceHandler must have been instantiated with at
least one initial input Facade, e.g. an InputStream.
                                                                                         
                                                                                         
<!--l. 1630--><p class="indent" >    <a 
 id="x1-4700048"></a><hr class="float"><div class="float" 
>
                                                                                         
                                                                                         
<a 
 id="x1-47001r6"></a>
<a 
 id="x1-47002"></a>
<!--l. 1630--><pre class="listings">&#x00A0;<br /><span class="label"><a 
 id="x1-47003r1"></a></span><tspan font-family="cmbx" font-size="12">interface</tspan>&#x00A0;FacadeFactory<tspan font-family="cmmi" font-size="12">&#x003C;</tspan>T<tspan font-family="cmmi" font-size="12">&#x003E;</tspan>&#x00A0;<tspan font-family="cmsy" font-size="10">{</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47004r2"></a></span>&#x00A0;T&#x00A0;build(ResourceHandler&#x00A0;resourceHandler);&#x00A0;<br /><span class="label"><a 
 id="x1-47005r3"></a></span>&#x00A0;<br /><span class="label"><a 
 id="x1-47006r4"></a></span><!--l. 1634--><span class="listings-nested"><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">/</tspan><tspan font-family="cmsy" font-size="10">*</tspan><tspan font-family="cmsy" font-size="10">*</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47007r5"></a></span><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmsy" font-size="10">*</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">Dependency</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">Facades</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">needed</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">by</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">this</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">factory</tspan><tspan font-family="cmti" font-size="12">.</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47008r6"></a></span><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmsy" font-size="10">*</tspan><tspan font-family="cmti" font-size="12">/</tspan></span>&#x00A0;<br /><span class="label"><a 
 id="x1-47009r7"></a></span>&#x00A0;Iterable<tspan font-family="cmmi" font-size="12">&#x003C;</tspan>?&#x00A0;<tspan font-family="cmbx" font-size="12">extends</tspan>&#x00A0;Class<tspan font-family="cmmi" font-size="12">&#x003C;</tspan>?<tspan font-family="cmmi" font-size="12">&#x003E;&#x003E;</tspan>&#x00A0;getDependencies();&#x00A0;<br /><span class="label"><a 
 id="x1-47010r8"></a></span><tspan font-family="cmsy" font-size="10">}</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47011r9"></a></span>&#x00A0;<br /><span class="label"><a 
 id="x1-47012r10"></a></span><tspan font-family="cmbx" font-size="12">interface</tspan>&#x00A0;FacadeRegistry&#x00A0;<tspan font-family="cmsy" font-size="10">{</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47013r11"></a></span><!--l. 1641--><span class="listings-nested"><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">/</tspan><tspan font-family="cmsy" font-size="10">*</tspan><tspan font-family="cmsy" font-size="10">*</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47014r12"></a></span><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmsy" font-size="10">*</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">Returns</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">Facade</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">factories</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">that</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">could</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">probably</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47015r13"></a></span><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmsy" font-size="10">*</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">build</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">the</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">requested</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">Facade</tspan><tspan font-family="cmti" font-size="12">.</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47016r14"></a></span><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmsy" font-size="10">*</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47017r15"></a></span><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmsy" font-size="10">*</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">@param</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">mediaType</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">MediaType</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">of</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">the</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">original</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">Resource</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47018r16"></a></span><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmsy" font-size="10">*</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">@param</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">clazz</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">requested</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">Facade</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">interface</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47019r17"></a></span><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmsy" font-size="10">*</tspan><tspan font-family="cmti" font-size="12">/</tspan></span>&#x00A0;<br /><span class="label"><a 
 id="x1-47020r18"></a></span>&#x00A0;Iterable<tspan font-family="cmmi" font-size="12">&#x003C;</tspan>FacadeFactory<tspan font-family="cmmi" font-size="12">&#x003C;</tspan>?<tspan font-family="cmmi" font-size="12">&#x003E;&#x003E;</tspan>&#x00A0;getFacadeFactories(MediaType&#x00A0;mediaType,&#x00A0;<br /><span class="label"><a 
 id="x1-47021r19"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Class<tspan font-family="cmmi" font-size="12">&#x003C;</tspan>?<tspan font-family="cmmi" font-size="12">&#x003E;</tspan>&#x00A0;clazz);&#x00A0;<br /><span class="label"><a 
 id="x1-47022r20"></a></span><tspan font-family="cmsy" font-size="10">}</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47023r21"></a></span>&#x00A0;<br /><span class="label"><a 
 id="x1-47024r22"></a></span><tspan font-family="cmbx" font-size="12">interface</tspan>&#x00A0;ResourceHandler&#x00A0;<tspan font-family="cmsy" font-size="10">{</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47025r23"></a></span><!--l. 1653--><span class="listings-nested"><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">/</tspan><tspan font-family="cmsy" font-size="10">*</tspan><tspan font-family="cmsy" font-size="10">*</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47026r24"></a></span><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmsy" font-size="10">*</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">Returns</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">the</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">unique</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">instance</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">of</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">a</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">Facade</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">for</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">this</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">Resource</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47027r25"></a></span><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmsy" font-size="10">*</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47028r26"></a></span><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmsy" font-size="10">*</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">Subsequent</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">calls</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">with</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">the</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">same</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">parameter</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">receive</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">the</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47029r27"></a></span><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmsy" font-size="10">*</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">_same</tspan><tspan font-family="cmti" font-size="12">_</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">unique</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">Facade</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">instance</tspan><tspan font-family="cmti" font-size="12">!</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47030r28"></a></span><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmsy" font-size="10">*</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47031r29"></a></span><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmsy" font-size="10">*</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">@param</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">clazz</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">requested</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">Facade</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">interface</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47032r30"></a></span><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmsy" font-size="10">*</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">@return</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">Facade</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">implementation</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">instance</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47033r31"></a></span><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmsy" font-size="10">*</tspan><tspan font-family="cmti" font-size="12">/</tspan></span>&#x00A0;<br /><span class="label"><a 
 id="x1-47034r32"></a></span>&#x00A0;<tspan font-family="cmmi" font-size="12">&#x003C;</tspan>T<tspan font-family="cmmi" font-size="12">&#x003E;</tspan>&#x00A0;T&#x00A0;getFacade(Class<tspan font-family="cmmi" font-size="12">&#x003C;</tspan>T<tspan font-family="cmmi" font-size="12">&#x003E;</tspan>&#x00A0;clazz);&#x00A0;<br /><span class="label"><a 
 id="x1-47035r33"></a></span>&#x00A0;<br /><span class="label"><a 
 id="x1-47036r34"></a></span><!--l. 1664--><span class="listings-nested"><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">/</tspan><tspan font-family="cmsy" font-size="10">*</tspan><tspan font-family="cmsy" font-size="10">*</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47037r35"></a></span><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmsy" font-size="10">*</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">Is</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">the</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">requested</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">Facade</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">interface</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">available</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">for</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">this</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">Resource</tspan><tspan font-family="cmti" font-size="12">?</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47038r36"></a></span><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmsy" font-size="10">*</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47039r37"></a></span><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmsy" font-size="10">*</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">@param</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">clazz</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">Facade</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">interface</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47040r38"></a></span><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmsy" font-size="10">*</tspan><tspan font-family="cmti" font-size="12">/</tspan></span>&#x00A0;<br /><span class="label"><a 
 id="x1-47041r39"></a></span>&#x00A0;<tspan font-family="cmbx" font-size="12">boolean</tspan>&#x00A0;hasFacade(Class<tspan font-family="cmmi" font-size="12">&#x003C;</tspan>?<tspan font-family="cmmi" font-size="12">&#x003E;</tspan>&#x00A0;clazz);&#x00A0;<br /><span class="label"><a 
 id="x1-47042r40"></a></span>&#x00A0;<br /><span class="label"><a 
 id="x1-47043r41"></a></span><!--l. 1671--><span class="listings-nested"><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">/</tspan><tspan font-family="cmsy" font-size="10">*</tspan><tspan font-family="cmsy" font-size="10">*</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47044r42"></a></span><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmsy" font-size="10">*</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">The</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">MediaType</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">of</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">the</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">original</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">Resource</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">from</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">which</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">this</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47045r43"></a></span><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmsy" font-size="10">*</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">ResourceHandler</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">was</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">instantiated</tspan><tspan font-family="cmti" font-size="12">.</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47046r44"></a></span><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmti" font-size="12">&#x00A0;</tspan><tspan font-family="cmsy" font-size="10">*</tspan><tspan font-family="cmti" font-size="12">/</tspan></span>&#x00A0;<br /><span class="label"><a 
 id="x1-47047r45"></a></span>&#x00A0;MediaType&#x00A0;getMediaType();&#x00A0;<br /><span class="label"><a 
 id="x1-47048r46"></a></span><tspan font-family="cmsy" font-size="10">}</tspan>
&#x00A0;<br /><span class="label"><a 
 id="x1-47049r47"></a></span></pre>
 <div class="caption" 
><span class="id">Listing&#x00A0;6: </span><span  
class="content">API of the ResourceFacades component</span></div><!--tex4ht:label?: x1-47000 -->
                                                                                         
                                                                                         
    </div><hr class="endfloat" />
<!--l. 1679--><p class="indent" >    <a 
href="#x1-470522">Figure&#x00A0;2<!--tex4ht:ref: fig:datafacades-api --></a> presents two example use cases for Facades. On the left site the request method
might want to know the full name of a submitted contact resource. It therefor requests a Person
facade. Different Person Facade factories are registered. The different factories in turn have each a
dependency on an InputStream parameterized with a Media Type. The provided Media Type
makes the resolution path unambiguous.
<!--l. 1686--><p class="indent" >    The right site shows dependencies of Title and Summary Facades. Different Factories would be
provided that knows to create meaningful titles and summaries for Persons, Events or Todo items
independent of the original Media Types. A title of a person surely includes the full name, for an
event the date and event title would be combined and a todo item could include the priority in the
title.
<!--l. 1692--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                         
                                                                                         
<a 
 id="x1-470522"></a>
                                                                                         
                                                                                         
<a 
 id="x1-47050r1"></a>
<!--l. 1713--><p class="noindent" > <object data="restful_groupware-2.svg" width="272.75473 " height="132.68385 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object> <a 
 id="x1-47051r2"></a> <object data="restful_groupware-3.svg" width="254.2059 " height="70.17517 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;2: </span><span  
class="content">Facade examples with dependencies</span></div><!--tex4ht:label?: x1-470522 -->
                                                                                         
                                                                                         
<!--l. 1735--><p class="indent" >    </div><hr class="endfigure">
<a 
 id="x1-47053r1"></a>
<tspan font-family="cmssbx" font-size="10">4.4.2.1  Related work</tspan>&#x00A0;   The idea for the Resource Facades concept was triggered by the use of the JavaBeans
Activation Framework<span class="footnote-mark"><a 
href="restful_groupware58.html#fn57x0"><sup class="textsuperscript">57</sup></a></span><a 
 id="x1-47054f57"></a> 
(JAF) in the JAX-RS specification. In this framework the DataHandler interface provides access to
available commands for a specific MediaType via the getCommand method. The framework
however was designed with the needs of a Desktop clipboard in mind. Since JAF has been released
for Java version 1.4 it also does neither support Generics nor uses the advantages of
immutability.
    <span class="cite">[<a 
href="#XPradel2008a">PO08</a>]</span> presents an approach and implementation in Scala to attach roles to arbitrary
objects. The work achieves type safe roles without extending the underlying language.
Using this library has been considered but it was discovered too late to be included.
Open questions are, how the declared media type of a Resource could be considered
in the selection of a role implementation and how roles could depend on other roles.
Another challenge would be to preserve role instances and thus to avoid recreating them
for every invocation. If is furthermore required that roles implement a given interface.
The Resource Facade approach presented here is slightly different in that creation of
the facades is implemented independent from the facades themselves by the factory
classes.
    JAX-RS provides the MessageBodyReader and -Writer interfaces. However these interfaces are
expected to be used only once per request. The resource method afterwards needs to work with
whatever interface was produced by the MessageBodyReader. There exists no facility to request
additional transformations or facades of a Resource.
    It is possible in JAX-RS to request a MessageBodyReader instance from the
javax.ws.rs.ext.Providers interface. This couldn&#8217;t however help to get additional Facades since the
InputStream has already been consumed.
    The concept shows similarities with Dependency Injection since dependencies of a
facade are also provided by an external component. It may be possible that the
concept could even be implemented on top of an existing Dependency Injection
framework.<span class="footnote-mark"><a 
href="restful_groupware59.html#fn58x0"><sup class="textsuperscript">58</sup></a></span><a 
 id="x1-47055f58"></a> 
Some aspects however may require extra care:
      <ul class="itemize1">
      <li class="itemize">Resolving the dependencies of Facade factories must consider the Media Type of the
      input data.
      </li>
      <li class="itemize">The scope of an instance is bound to the ResourceHandler which in most cases may
      be equivalent to the Request scope, but this can&#8217;t be guaranteed.
      </li>
      <li class="itemize">Each ResourceHandler manages its own view of available Facades.</li></ul>
<!--l. 1810--><p class="indent" >    The Apache Wink Rest Framework implements a concept called
&#8220;Assets&#8221;.<span class="footnote-mark"><a 
href="restful_groupware60.html#fn59x0"><sup class="textsuperscript">59</sup></a></span><a 
 id="x1-47056f59"></a> 
                                                                                         
                                                                                         
Assets are containers for the resource data injected in or returned from resource methods. Assets
provide methods annotated with <span class="lstinline">@Produces</span> or <span class="lstinline">@Consumes</span> to handle different Media types. In
contrast to Resource Facades, the set of supported media types of assets can only be extended by
extending the asset classes. It is also not possible like in listing <a 
href="#x1-470522">2<!--tex4ht:ref: fig:facade-ex-dependen --></a> to provide generic Facades for a
title or a summary.
<a 
 id="x1-47057r2"></a>
<tspan font-family="cmssbx" font-size="10">4.4.2.2  Scala&#8217;s type system</tspan>&#x00A0;   The proposed Java class diagram in this section has the
disadvantage that the availability of a facade can not be checked at compile time. It seems
however, that a more advanced type system could help in this regard.
    Listing <a 
href="#x1-47058r7">7<!--tex4ht:ref: fig:facades-with-scala-types --></a> demonstrates features of the Scala type system<span class="cite">[<a 
href="#XOdersky2011">Ode11</a>]</span> that could be of interest
here. In the example a post method handler has the requirement to access the posted
data through the facades <span class="lstinline">VCard</span> and <span class="lstinline">TextSummary</span>. Additionally the data should be
forwarded to an implementation of the trait Storage which has its own requirement for a
facade.
    Scala&#8217;s &#8220;compound types&#8221; feature is used in line <a 
href="#x1-47057r8">8<!--tex4ht:ref: line-scala-compound --></a> to combine these requirements into an
anonymous type. The &#8220;type alias&#8221; feature allows it to assign the identifier <span class="lstinline">MessageBody</span> to
this anonymous type and thus to keep the declaration of the <span class="lstinline">post</span> method short and
readable.
                                                                                         
                                                                                         
    <a 
 id="x1-47057r20"></a><hr class="float"><div class="float" 
>
                                                                                         
                                                                                         
<a 
 id="x1-47058r7"></a>
<a 
 id="x1-47059"></a>
<!--l. 1841--><pre class="listings">&#x00A0;<br /><span class="label"><a 
 id="x1-47060r1"></a>1</span>trait&#x00A0;Storage[ReqFacade]&#x00A0;<tspan font-family="cmsy" font-size="10">{</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47061r2"></a>2</span>&#x00A0;def&#x00A0;create(id:&#x00A0;String,&#x00A0;<br /><span class="label"><a 
 id="x1-47062r3"></a>3</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;body:&#x00A0;ResourceHandler&#x00A0;with&#x00A0;FacadeFactory[ReqFacade])&#x00A0;<br /><span class="label"><a 
 id="x1-47063r4"></a>4</span><tspan font-family="cmsy" font-size="10">}</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47064r5"></a>5</span>&#x00A0;<br /><span class="label"><a 
 id="x1-47065r6"></a>6</span><tspan font-family="cmbx" font-size="12">class</tspan>&#x00A0;PostToCollection[StorageReqFacade]&#x00A0;<br /><span class="label"><a 
 id="x1-47066r7"></a>7</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(storage:&#x00A0;Storage[StorageReqFacade])&#x00A0;<tspan font-family="cmsy" font-size="10">{</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47067r8"></a>8</span>&#x00A0;type&#x00A0;MessageBody&#x00A0;=&#x00A0;ResourceHandler&#x00A0;</pre><!--l. 1849--><pre class="listings"></pre><!--l. 1849--><pre class="listings">&#x00A0;<br /><span class="label"><a 
 id="x1-47068r9"></a>9</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;with&#x00A0;FacadeFactory[VCard]&#x00A0;<br /><span class="label"><a 
 id="x1-47069r10"></a>10</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;with&#x00A0;FacadeFactory[TextSummary]&#x00A0;<br /><span class="label"><a 
 id="x1-47070r11"></a>11</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;with&#x00A0;FacadeFactory[StorageReqFacade]&#x00A0;<br /><span class="label"><a 
 id="x1-47071r12"></a>12</span>&#x00A0;<br /><span class="label"><a 
 id="x1-47072r13"></a>13</span>&#x00A0;def&#x00A0;post(body:MessageBody)&#x00A0;:&#x00A0;Response&#x00A0;=&#x00A0;<tspan font-family="cmsy" font-size="10">{</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47073r14"></a>14</span>&#x00A0;&#x00A0;...&#x00A0;<br /><span class="label"><a 
 id="x1-47074r15"></a>15</span>&#x00A0;&#x00A0;storage.create(<!--l. 1856--><span class="listings-nested">&#8221;id&#8221;</span>,&#x00A0;body)&#x00A0;<br /><span class="label"><a 
 id="x1-47075r16"></a>16</span>&#x00A0;&#x00A0;...&#x00A0;<br /><span class="label"><a 
 id="x1-47076r17"></a>17</span>&#x00A0;<tspan font-family="cmsy" font-size="10">}</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-47077r18"></a>18</span><tspan font-family="cmsy" font-size="10">}</tspan>
&#x00A0;<br /><span class="label"><a 
 id="x1-47078r19"></a>19</span></pre>
 <div class="caption" 
><span class="id">Listing&#x00A0;7: </span><span  
class="content">Implementing the facades approach with Scala&#8217;s type system</span></div><!--tex4ht:label?: x1-47057r -->
                                                                                         
                                                                                         
    </div><hr class="endfloat" />
    This example and the mentioned work on Scala roles shows that an advanced type systems
may be able to considerably improve the presented facades approach. A more detailed
study however is out of the scope of this work and the author&#8217;s comprehension of type
systems.
<a 
 id="x1-47079r56"></a>
<h5 class="subsubsectionHead"><span class="titlemark">4.4.3  </span> <a 
 id="x1-480003"></a>Other components</h5>
<a 
 id="x1-48001r1"></a>
<tspan font-family="cmssbx" font-size="10">4.4.3.1  Actions</tspan>&#x00A0;   An action is basically the code that should be executed to respond to a client
request. An action receives all information about a request and is connected to the
application. It can use and manipulate the application state and produces a data structure
representing the response. It can be compared to the &#8220;Request method&#8221; defined in
JAX-RS.
    It is desirable to reuse actions across different consumed media types. Typical tasks to perform
in a POST or PUT resource method are:
      <ul class="itemize1">
      <li class="itemize">Transform the input format in a format suitable for the storage component.
      </li>
      <li class="itemize">Check the validity of the received data.
      </li>
      <li class="itemize">Extract information to be sent to another component, e.g. to notify users about changes
      or to index the new data for search.</li></ul>
<a 
 id="x1-48002r2"></a>
<tspan font-family="cmssbx" font-size="10">4.4.3.2  CollectionStorage</tspan>&#x00A0;   The collection storage interface offers the necessary means to store
and retrieve resources. For clarity this interface is not further broken down into a read-only part
and a full read-write interface.
    A collection storage is instantiated with the knowledge of the collection it is responsible
for. It therefor typically only returns resources that were previously stored through it
although it may share its underlying persistency provider with other collection storage
instances.
    The life cycle of a collection storage is scoped to the application. It is therefor possible to
attach memory based caching to this component.
    The storage does not expose any support for transactions. Instead every
method call represents one atomic action independent from other actions.
Conditional request execution is therefor in the responsibility of the storage. Listing
<a 
href="#x1-48004r8">8<!--tex4ht:ref: fig:evaluatepreconditions-concurrency --></a><span class="footnote-mark"><a 
href="restful_groupware61.html#fn60x0"><sup class="textsuperscript">60</sup></a></span><a 
 id="x1-48003f60"></a> 
shows a possibility for a lost update. Another request could have updated the resource between the
etag check and the <span class="lstinline">doUpdate</span> call.
                                                                                         
                                                                                         
    <a 
 id="x1-48002r5"></a><hr class="float"><div class="float" 
>
                                                                                         
                                                                                         
<a 
 id="x1-48004r8"></a>
<a 
 id="x1-48005"></a>
<!--l. 1914--><pre class="listings">&#x00A0;<br /><span class="label"><a 
 id="x1-48006r1"></a></span>ResponseBuilder&#x00A0;rb&#x00A0;=&#x00A0;request.evaluatePreconditions(etag);&#x00A0;<br /><span class="label"><a 
 id="x1-48007r2"></a></span><tspan font-family="cmbx" font-size="12">if</tspan>&#x00A0;(rb&#x00A0;==&#x00A0;<tspan font-family="cmbx" font-size="12">null</tspan>)&#x00A0;<br /><span class="label"><a 
 id="x1-48008r3"></a></span>&#x00A0;&#x00A0;<tspan font-family="cmbx" font-size="12">return</tspan>&#x00A0;doUpdate(foo);
&#x00A0;<br /><span class="label"><a 
 id="x1-48009r4"></a></span></pre>
 <div class="caption" 
><span class="id">Listing&#x00A0;8: </span><span  
class="content">Potential lost-update problem with JAX-RS</span></div><!--tex4ht:label?: x1-48002r -->
                                                                                         
                                                                                         
    </div><hr class="endfloat" />
<a 
 id="x1-48010r3"></a>
<tspan font-family="cmssbx" font-size="10">4.4.3.3  Preparsed Request Components</tspan>&#x00A0;   It seems like an obvious fact that could not be
further deduced, that any response action to a request must be preluded by a parsing of the
request. In the case of a REST application this parsing could be further divided in two
steps:
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x1-48012x1">Parse URI, Accept Header and HTTP verb to select the Resource method
      </li>
      <li 
  class="enumerate" id="x1-48014x2">Resource method specific parsing as defined by annotations or done in the Resource
      method</li></ol>
<!--l. 1939--><p class="noindent" >JAX-RS defines only rudimentary support for the second step by means of inflexible annotations.
Listing <a 
href="#x1-48016r9">9<!--tex4ht:ref: fig:jaxrs-annotated-queryparams --></a> shows the verbosity of parsing a set of standard query parameters for a search interface.
An alternative is shown in listing <a 
href="#x1-48023r10">10<!--tex4ht:ref: fig:request-components --></a>. The parsing of query parameters is delegated to the class
SearchRequest.<span class="footnote-mark"><a 
href="restful_groupware62.html#fn61x0"><sup class="textsuperscript">61</sup></a></span><a 
 id="x1-48015f61"></a> 
The request method &#8220;handleGet&#8221; can access the parameters easily through the injected
SearchRequest instance.
                                                                                         
                                                                                         
<!--l. 1950--><p class="indent" >    <a 
 id="x1-48010r6"></a><hr class="float"><div class="float" 
>
                                                                                         
                                                                                         
<a 
 id="x1-48016r9"></a>
<a 
 id="x1-48017"></a>
<!--l. 1950--><pre class="listings">&#x00A0;<br /><span class="label"><a 
 id="x1-48018r1"></a></span>@Get&#x00A0;<tspan font-family="cmbx" font-size="12">public</tspan>&#x00A0;Response&#x00A0;get(@QueryParam(<!--l. 1951--><span class="listings-nested">&#8221;query&#8221;</span>)&#x00A0;String&#x00A0;query,&#x00A0;<br /><span class="label"><a 
 id="x1-48019r2"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;@QueryParam(<!--l. 1952--><span class="listings-nested">&#8221;sort<tspan font-family="cmsy" font-size="10">-</tspan>by&#8221;</span>)&#x00A0;String&#x00A0;sortBy,&#x00A0;<br /><span class="label"><a 
 id="x1-48020r3"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;@QueryParam(<!--l. 1953--><span class="listings-nested">&#8221;offset&#8221;</span>)&#x00A0;<tspan font-family="cmbx" font-size="12">int</tspan>&#x00A0;offset,&#x00A0;<br /><span class="label"><a 
 id="x1-48021r4"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;@QueryParam(<!--l. 1954--><span class="listings-nested">&#8221;limit&#8221;</span>)&#x00A0;<tspan font-family="cmbx" font-size="12">int</tspan>&#x00A0;limit&#x00A0;)&#x00A0;<tspan font-family="cmsy" font-size="10">{</tspan>
&#x00A0;<br /><span class="label"><a 
 id="x1-48022r5"></a></span></pre>
 <div class="caption" 
><span class="id">Listing&#x00A0;9: </span><span  
class="content">Verbosity of parsing Requests with JAX-RS</span></div><!--tex4ht:label?: x1-48010r -->
                                                                                         
                                                                                         
    </div><hr class="endfloat" />
                                                                                         
                                                                                         
<!--l. 1958--><p class="indent" >    <a 
 id="x1-48010r17"></a><hr class="float"><div class="float" 
>
                                                                                         
                                                                                         
<a 
 id="x1-48023r10"></a>
<a 
 id="x1-48024"></a>
<!--l. 1958--><pre class="listings">&#x00A0;<br /><span class="label"><a 
 id="x1-48025r1"></a></span>@GET&#x00A0;@Inject&#x00A0;<br /><span class="label"><a 
 id="x1-48026r2"></a></span><tspan font-family="cmbx" font-size="12">public</tspan>&#x00A0;Response&#x00A0;handleGet(SearchRequest&#x00A0;sr)&#x00A0;<tspan font-family="cmsy" font-size="10">{</tspan>&#x00A0;...&#x00A0;<tspan font-family="cmsy" font-size="10">}</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-48027r3"></a></span>&#x00A0;<br /><span class="label"><a 
 id="x1-48028r4"></a></span>@RequestScoped&#x00A0;<br /><span class="label"><a 
 id="x1-48029r5"></a></span><tspan font-family="cmbx" font-size="12">public</tspan>&#x00A0;<tspan font-family="cmbx" font-size="12">class</tspan>&#x00A0;SearchRequest&#x00A0;<tspan font-family="cmsy" font-size="10">{</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-48030r6"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;<tspan font-family="cmbx" font-size="12">public</tspan>&#x00A0;<tspan font-family="cmbx" font-size="12">final</tspan>&#x00A0;String&#x00A0;query,&#x00A0;sortBy;&#x00A0;<br /><span class="label"><a 
 id="x1-48031r7"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;<tspan font-family="cmbx" font-size="12">public</tspan>&#x00A0;<tspan font-family="cmbx" font-size="12">final</tspan>&#x00A0;<tspan font-family="cmbx" font-size="12">int</tspan>&#x00A0;offset,&#x00A0;limit;&#x00A0;<br /><span class="label"><a 
 id="x1-48032r8"></a></span>&#x00A0;<br /><span class="label"><a 
 id="x1-48033r9"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;@Inject&#x00A0;<tspan font-family="cmbx" font-size="12">public</tspan>&#x00A0;SearchRequest(QueryParams&#x00A0;qp)&#x00A0;<tspan font-family="cmsy" font-size="10">{</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-48034r10"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;query&#x00A0;=&#x00A0;qp.getNotEmpty(<!--l. 1968--><span class="listings-nested">&#8221;query&#8221;</span>);&#x00A0;<br /><span class="label"><a 
 id="x1-48035r11"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;sortBy&#x00A0;=&#x00A0;qp.getOrElse(<!--l. 1969--><span class="listings-nested">&#8221;sort<tspan font-family="cmsy" font-size="10">-</tspan>by&#8221;</span>,&#x00A0;<!--l. 1969--><span class="listings-nested">&#8221;score&#8221;</span>);&#x00A0;<br /><span class="label"><a 
 id="x1-48036r12"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;offset&#x00A0;=&#x00A0;qp.getPositiveIntOrElse(<!--l. 1970--><span class="listings-nested">&#8221;offset&#8221;</span>,&#x00A0;0);&#x00A0;<br /><span class="label"><a 
 id="x1-48037r13"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;limit&#x00A0;=&#x00A0;qp.getPositiveIntOrElse(<!--l. 1971--><span class="listings-nested">&#8221;limit&#8221;</span>,&#x00A0;<tspan font-family="cmsy" font-size="10">-</tspan>1);&#x00A0;<br /><span class="label"><a 
 id="x1-48038r14"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;<tspan font-family="cmsy" font-size="10">}</tspan>&#x00A0;<br /><span class="label"><a 
 id="x1-48039r15"></a></span><tspan font-family="cmsy" font-size="10">}</tspan>
&#x00A0;<br /><span class="label"><a 
 id="x1-48040r16"></a></span></pre>
 <div class="caption" 
><span class="id">Listing&#x00A0;10: </span><span  
class="content">Separating Request parsing from the Resource method</span></div><!--tex4ht:label?: x1-48010r -->
                                                                                         
                                                                                         
    </div><hr class="endfloat" />
<!--l. 1976--><p class="indent" >    The main advantages of this approach would be:
      <ul class="itemize1">
      <li class="itemize">Classes parsing commonly used query parameters can be reused.
      </li>
      <li class="itemize">The request method declaration gets much easier to read.
      </li>
      <li class="itemize">Sophisticated validation can be applied without obfuscating the request method.
      </li>
      <li class="itemize">Default values for unspecified input could depend on information only available at
      runtime instead of being provided as static value to the applications source code.</li></ul>
<!--l. 1987--><p class="indent" >    This approach is possible to implement for example with the dependency injection support provided by the
Jersey framework.<span class="footnote-mark"><a 
href="restful_groupware63.html#fn62x0"><sup class="textsuperscript">62</sup></a></span><a 
 id="x1-48041f62"></a> 
<a 
 id="x1-48042r4"></a>
<tspan font-family="cmssbx" font-size="10">4.4.3.4  Exkurs: Driving Dependency Injection further</tspan>&#x00A0;   <hr class="figure"><div class="figure" 
>
                                                                                         
                                                                                         
<a 
 id="x1-480433"></a>
    &#x00A0;
                                                                                         
                                                                                         
<object data="restful_groupware-4.svg" width="429.31863 " height="317.84631 " type="image/svg+xml"><p>SVG-Viewer needed.</p></object>
 <div class="caption" 
><span class="id">Figure&#x00A0;3: </span><span  
class="content">Building a processing pipeline with Dependency Injection</span></div><!--tex4ht:label?: x1-480433 -->
    &#x00A0;
                                                                                         
                                                                                         
    </div><hr class="endfigure">
    Paragraph <a 
href="#x1-48010r3">4.4.3.3<!--tex4ht:ref: sec:prep-requ-comp --></a> used dependency injection to cause the instantiation of a request scoped
class that prepares information for the request method (&#8220;handleGet&#8221; in the example). This idea
could be extended.
    The information from the SearchRequest class is probably just forwarded by &#8220;handleGet&#8221; to
another component that executes the search on a given collection. Thus the request methot is
ultimately interested on the search result set to transform it into a response. Consequently the
&#8220;handleGet&#8221; method could use dependency injection to request the result set and only start
working on this. Figure <a 
href="#x1-480433">3<!--tex4ht:ref: fig:dependency-injection-pipeline --></a> visualizes the hypothetic dependency graph of an application specific
ResultSet class.
    The figure shows how the CollectionStorage to search on is identified by the URI path and the
search parameters by the SearchRequest class of listing <a 
href="#x1-48023r10">10<!--tex4ht:ref: fig:request-components --></a>. The dependency injection is
configured to produce a ResultSet class by executing a SearchService with the request scoped
CollectionStorage and SearchRequest.
    The idea might be an alternative implementation of processing pipelines as proposed in <span class="cite">[<a 
href="#XDavis:2011:XTR:1967428.1967437">DM11</a>]</span>
and worth exploring in a separate work. One advantage of this approach would be that the
processing pipeline is defined and configured in the same language then the rest of the
application.
<a 
 id="x1-48044r5"></a>
<tspan font-family="cmssbx" font-size="10">4.4.3.5  GenericResourceAttributes</tspan>&#x00A0;
<a 
 id="x1-48045r53"></a>
<h4 class="subsectionHead"><span class="titlemark">4.5  </span> <a 
 id="x1-490005"></a>Detailed Design Considerations</h4>
<a 
 id="x1-49001r65"></a>
<h4 class="subsectionHead"><span class="titlemark">4.6  </span> <a 
 id="x1-500006"></a>Client Design</h4>
<!--l. 2059--><p class="noindent" >What needs a client to know, how does it need to work?
<a 
 id="x1-50001r41"></a>
<h3 class="sectionHead"><span class="titlemark">5  </span> <a 
 id="x1-510005"></a>Summary and Conclusions</h3>
<!--l. 2065--><p class="noindent" >
                                                                                         
                                                                                         
                                                                                         
                                                                                         
<h3 class="likesectionHead"><a 
 id="x1-520005"></a>References</h3>
<!--l. 2--><p class="noindent" ><a 
 id="likesection.1"></a><a 
 id="Q1-1-69"></a>
           <div class="thebibliography">
           <p class="bibitem" ><span class="biblabel">
 [All10]    <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XAllamaraju_2010"></a><tspan font-family="cmcsc" font-size="10">A<span 
class="small-caps">l</span><span 
class="small-caps">l</span><span 
class="small-caps">a</span><span 
class="small-caps">m</span><span 
class="small-caps">a</span><span 
class="small-caps">r</span><span 
class="small-caps">a</span><span 
class="small-caps">j</span><span 
class="small-caps">u</span></tspan>, Subbu ; <tspan font-family="cmcsc" font-size="10">T<span 
class="small-caps">r</span><span 
class="small-caps">e</span><span 
class="small-caps">s</span><span 
class="small-caps">e</span><span 
class="small-caps">l</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span></tspan>, Mary&#x00A0;E. (Hrsg.): <tspan font-family="cmti" font-size="12">RESTful Web Services</tspan>
           <tspan font-family="cmti" font-size="12">Cookbook</tspan>. O&#8217;Reilly, 2010. &#8211; 314 S.
           </p>
           <p class="bibitem" ><span class="biblabel">
 [BGM<sup><tspan font-family="cmr" font-size="8">+</tspan></sup>11]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XBoyer2011"></a><tspan font-family="cmcsc" font-size="10">B<span 
class="small-caps">o</span><span 
class="small-caps">y</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span></tspan>,  John  ;  <tspan font-family="cmcsc" font-size="10">G<span 
class="small-caps">a</span><span 
class="small-caps">o</span></tspan>,  Sandy  ;  <tspan font-family="cmcsc" font-size="10">M<span 
class="small-caps">a</span><span 
class="small-caps">l</span><span 
class="small-caps">a</span><span 
class="small-caps">i</span><span 
class="small-caps">k</span><span 
class="small-caps">a</span></tspan>,  Susan  ;  <tspan font-family="cmcsc" font-size="10">M<span 
class="small-caps">a</span><span 
class="small-caps">x</span><span 
class="small-caps">i</span><span 
class="small-caps">m</span><span 
class="small-caps">i</span><span 
class="small-caps">l</span><span 
class="small-caps">i</span><span 
class="small-caps">e</span><span 
class="small-caps">n</span></tspan>,  Michael
           ;  <tspan font-family="cmcsc" font-size="10">S<span 
class="small-caps">a</span><span 
class="small-caps">l</span><span 
class="small-caps">z</span></tspan>,  Rich  ;  <tspan font-family="cmcsc" font-size="10">S<span 
class="small-caps">i</span><span 
class="small-caps">m</span><span 
class="small-caps">e</span><span 
class="small-caps">o</span><span 
class="small-caps">n</span></tspan>,  Jerome:     Experiences  with  JSON  and  XML
           Transformations. In: <tspan font-family="cmti" font-size="12">Workshop on Data and Services Integration </tspan>W3C, 2011
           </p>
           <p class="bibitem" ><span class="biblabel">
 [BLFM05]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XRFC3986"></a><tspan font-family="cmcsc" font-size="10">B<span 
class="small-caps">e</span><span 
class="small-caps">r</span><span 
class="small-caps">n</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span><span 
class="small-caps">s</span>-L<span 
class="small-caps">e</span><span 
class="small-caps">e</span></tspan>,  T.  ;  <tspan font-family="cmcsc" font-size="10">F<span 
class="small-caps">i</span><span 
class="small-caps">e</span><span 
class="small-caps">l</span><span 
class="small-caps">d</span><span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">g</span></tspan>,  R.  ;  <tspan font-family="cmcsc" font-size="10">M<span 
class="small-caps">a</span><span 
class="small-caps">s</span><span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">t</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span></tspan>,  L.:   Uniform  Resource
           Identifier (URI): Generic Syntax / RFC Editor.   RFC Editor, January 2005
           (3986). &#8211; RFC
           </p>
           <p class="bibitem" ><span class="biblabel">
 [BRSW00] <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XBaeumer2000"></a><tspan font-family="cmti" font-size="12">Kapitel </tspan>&#x00A0;2.  In: <tspan font-family="cmcsc" font-size="10">B</tspan><tspan font-family="cmcsc" font-size="10">ä<span 
class="small-caps">u</span><span 
class="small-caps">m</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span></tspan>, Dirk ; <tspan font-family="cmcsc" font-size="10">R<span 
class="small-caps">i</span><span 
class="small-caps">e</span><span 
class="small-caps">h</span><span 
class="small-caps">l</span><span 
class="small-caps">e</span></tspan>, Dirk ; <tspan font-family="cmcsc" font-size="10">S<span 
class="small-caps">i</span><span 
class="small-caps">b</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span><span 
class="small-caps">s</span><span 
class="small-caps">k</span><span 
class="small-caps">i</span></tspan>, Wolf ; <tspan font-family="cmcsc" font-size="10">W<span 
class="small-caps">u</span><span 
class="small-caps">l</span><span 
class="small-caps">f</span></tspan>,
           Martina: <tspan font-family="cmti" font-size="12">Role Object</tspan>. Reading, Massachusetts : Addison-Wesley, 2000 (Pattern
           Languages of Program Design&#x00A0;4), S. 15&#8211;32
           </p>
           <p class="bibitem" ><span class="biblabel">
 [CDDM09] <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XDBLP:books/daglib/0023755"></a><tspan font-family="cmcsc" font-size="10">C<span 
class="small-caps">a</span><span 
class="small-caps">s</span><span 
class="small-caps">t</span><span 
class="small-caps">e</span><span 
class="small-caps">l</span><span 
class="small-caps">e</span><span 
class="small-caps">y</span><span 
class="small-caps">n</span></tspan>, Sven ; <tspan font-family="cmcsc" font-size="10">D<span 
class="small-caps">a</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">e</span><span 
class="small-caps">l</span></tspan>, Florian ; <tspan font-family="cmcsc" font-size="10">D<span 
class="small-caps">o</span><span 
class="small-caps">l</span><span 
class="small-caps">o</span><span 
class="small-caps">g</span></tspan>, Peter ; <tspan font-family="cmcsc" font-size="10">M<span 
class="small-caps">a</span><span 
class="small-caps">t</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span><span 
class="small-caps">a</span></tspan>, Maristella:
           <tspan font-family="cmti" font-size="12">Engineering Web Applications</tspan>.   Springer, 2009. &#8211;   I&#8211;XIII, 1&#8211;349 S. &#8211;   ISBN
           978&#8211;3&#8211;540&#8211;92200&#8211;1
           </p>
           <p class="bibitem" ><span class="biblabel">
 [Cli]      <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XClinton"></a><tspan font-family="cmcsc" font-size="10">C<span 
class="small-caps">l</span><span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">t</span><span 
class="small-caps">o</span><span 
class="small-caps">n</span></tspan>, DeWitt: <tspan font-family="cmti" font-size="12">OpenSearch Specification 1.1 Draft 5</tspan>. available online at
           <a 
href="http://opensearch.org" class="url" ><tspan font-family="cmtt" font-size="12">http://opensearch.org</tspan></a>; visited at 1st March 2012. <a 
href="http://opensearch.org" class="url" ><tspan font-family="cmtt" font-size="12">http://opensearch.org</tspan></a>
           </p>
           <p class="bibitem" ><span class="biblabel">
 [Cro06]   <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XRFC4627"></a><tspan font-family="cmcsc" font-size="10">C<span 
class="small-caps">r</span><span 
class="small-caps">o</span><span 
class="small-caps">c</span><span 
class="small-caps">k</span><span 
class="small-caps">f</span><span 
class="small-caps">o</span><span 
class="small-caps">r</span><span 
class="small-caps">d</span></tspan>, D.:  The application/json Media Type for JavaScript Object
           Notation (JSON) / RFC Editor. RFC Editor, July 2006 (4627). &#8211; RFC
           </p>
           <p class="bibitem" ><span class="biblabel">
 [Dab11]   <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XRFC6352"></a><tspan font-family="cmcsc" font-size="10">D<span 
class="small-caps">a</span><span 
class="small-caps">b</span><span 
class="small-caps">o</span><span 
class="small-caps">o</span></tspan>, C.: CardDAV: vCard Extensions to Web Distributed Authoring and
           Versioning (WebDAV) / RFC Editor. RFC Editor, August 2011 (6352). &#8211; RFC
           </p>
           <p class="bibitem" ><span class="biblabel">
 [DDD07]  <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XRFC4791"></a><tspan font-family="cmcsc" font-size="10">D<span 
class="small-caps">a</span><span 
class="small-caps">b</span><span 
class="small-caps">o</span><span 
class="small-caps">o</span></tspan>, C. ; <tspan font-family="cmcsc" font-size="10">D<span 
class="small-caps">e</span><span 
class="small-caps">s</span><span 
class="small-caps">r</span><span 
class="small-caps">u</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">s</span><span 
class="small-caps">e</span><span 
class="small-caps">a</span><span 
class="small-caps">u</span><span 
class="small-caps">x</span></tspan>, B. ; <tspan font-family="cmcsc" font-size="10">D<span 
class="small-caps">u</span><span 
class="small-caps">s</span><span 
class="small-caps">s</span><span 
class="small-caps">e</span><span 
class="small-caps">a</span><span 
class="small-caps">u</span><span 
class="small-caps">l</span><span 
class="small-caps">t</span></tspan>, L.:  Calendaring Extensions
           to WebDAV (CalDAV) / RFC Editor. RFC Editor, March 2007 (4791). &#8211; RFC
                                                                                         
                                                                                         
           </p>
           <p class="bibitem" ><span class="biblabel">
 [DM11]   <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XDavis:2011:XTR:1967428.1967437"></a><tspan font-family="cmcsc" font-size="10">D<span 
class="small-caps">a</span><span 
class="small-caps">v</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span></tspan>, Cornelia ; <tspan font-family="cmcsc" font-size="10">M<span 
class="small-caps">a</span><span 
class="small-caps">g</span><span 
class="small-caps">u</span><span 
class="small-caps">i</span><span 
class="small-caps">r</span><span 
class="small-caps">e</span></tspan>, Tom:  XML technologies for RESTful services
           development. In: <tspan font-family="cmti" font-size="12">Proceedings of the Second International Workshop on RESTful</tspan>
           <tspan font-family="cmti" font-size="12">Design</tspan>.    New  York,  NY,  USA  :  ACM,  2011  (WS-REST  &#8217;11).  &#8211;    ISBN
           978&#8211;1&#8211;4503&#8211;0623&#8211;2, 26&#8211;32
           </p>
           <p class="bibitem" ><span class="biblabel">
 [Dus04]   <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XDusseault2004"></a><tspan font-family="cmcsc" font-size="10">D<span 
class="small-caps">u</span><span 
class="small-caps">s</span><span 
class="small-caps">s</span><span 
class="small-caps">e</span><span 
class="small-caps">a</span><span 
class="small-caps">u</span><span 
class="small-caps">l</span><span 
class="small-caps">t</span></tspan>,  L.:   <tspan font-family="cmti" font-size="12">WebDav:  next  generation  collaborative  Web  authoring</tspan>.
           Prentice  Hall  PTR,  2004  (Prentice  Hall  series  in  computer  networking  and
           distributed systems).  <a 
href="http://books.google.com/books?id=LN6PRtgiwNgC" class="url" ><tspan font-family="cmtt" font-size="12">http://books.google.com/books?id=LN6PRtgiwNgC</tspan></a>. &#8211;
           ISBN 9780130652089
           </p>
           <p class="bibitem" ><span class="biblabel">
 [Dus07]   <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XRFC4918"></a><tspan font-family="cmcsc" font-size="10">D<span 
class="small-caps">u</span><span 
class="small-caps">s</span><span 
class="small-caps">s</span><span 
class="small-caps">e</span><span 
class="small-caps">a</span><span 
class="small-caps">u</span><span 
class="small-caps">l</span><span 
class="small-caps">t</span></tspan>,  L.:   HTTP  Extensions  for  Web  Distributed  Authoring  and
           Versioning (WebDAV) / RFC Editor. RFC Editor, June 2007 (4918). &#8211; RFC
           </p>
           <p class="bibitem" ><span class="biblabel">
 [FGM<sup><tspan font-family="cmr" font-size="8">+</tspan></sup>99]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XRFC2616"></a><tspan font-family="cmcsc" font-size="10">F<span 
class="small-caps">i</span><span 
class="small-caps">e</span><span 
class="small-caps">l</span><span 
class="small-caps">d</span><span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">g</span></tspan>, R. ; <tspan font-family="cmcsc" font-size="10">G<span 
class="small-caps">e</span><span 
class="small-caps">t</span><span 
class="small-caps">t</span><span 
class="small-caps">y</span><span 
class="small-caps">s</span></tspan>, J. ; <tspan font-family="cmcsc" font-size="10">M<span 
class="small-caps">o</span><span 
class="small-caps">g</span><span 
class="small-caps">u</span><span 
class="small-caps">l</span></tspan>, J. ; <tspan font-family="cmcsc" font-size="10">F<span 
class="small-caps">r</span><span 
class="small-caps">y</span><span 
class="small-caps">s</span><span 
class="small-caps">t</span><span 
class="small-caps">y</span><span 
class="small-caps">k</span></tspan>, H. ; <tspan font-family="cmcsc" font-size="10">M<span 
class="small-caps">a</span><span 
class="small-caps">s</span><span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">t</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span></tspan>, L.
           ; <tspan font-family="cmcsc" font-size="10">L<span 
class="small-caps">e</span><span 
class="small-caps">a</span><span 
class="small-caps">c</span><span 
class="small-caps">h</span></tspan>, P. ; <tspan font-family="cmcsc" font-size="10">B<span 
class="small-caps">e</span><span 
class="small-caps">r</span><span 
class="small-caps">n</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span><span 
class="small-caps">s</span>-L<span 
class="small-caps">e</span><span 
class="small-caps">e</span></tspan>, T.:  Hypertext Transfer Protocol &#8211; HTTP/1.1 /
           RFC Editor. RFC Editor, June 1999 (2616). &#8211; RFC
           </p>
           <p class="bibitem" ><span class="biblabel">
 [Fie00]    <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XFielding2000"></a><tspan font-family="cmcsc" font-size="10">F<span 
class="small-caps">i</span><span 
class="small-caps">e</span><span 
class="small-caps">l</span><span 
class="small-caps">d</span><span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">g</span></tspan>,  Roy&#x00A0;T.:      <tspan font-family="cmti" font-size="12">REST:  Architectural  Styles  and  the  Design  of</tspan>
           <tspan font-family="cmti" font-size="12">Network-based Software Architectures</tspan>, University of California, Irvine, Doctoral
           dissertation, 2000
           </p>
           <p class="bibitem" ><span class="biblabel">
 [Fow97]   <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XFowler1997"></a><tspan font-family="cmcsc" font-size="10">F<span 
class="small-caps">o</span><span 
class="small-caps">w</span><span 
class="small-caps">l</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span></tspan>,      Martin:                Dealing      with      Roles.                In:
           <tspan font-family="cmti" font-size="12">4th Pattern Languages of Programming Conference</tspan>, 1997. &#8211; Available online at
           <a 
href="http://martinfowler.com/apsupp/roles.pdf" class="url" ><tspan font-family="cmtt" font-size="12">http://martinfowler.com/apsupp/roles.pdf</tspan></a>; visited at 23th February 2012
           </p>
           <p class="bibitem" ><span class="biblabel">
 [GFH<sup><tspan font-family="cmr" font-size="8">+</tspan></sup>12] <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XGregorio2012"></a><tspan font-family="cmcsc" font-size="10">G<span 
class="small-caps">r</span><span 
class="small-caps">e</span><span 
class="small-caps">g</span><span 
class="small-caps">o</span><span 
class="small-caps">r</span><span 
class="small-caps">i</span><span 
class="small-caps">o</span></tspan>, Joe ; <tspan font-family="cmcsc" font-size="10">F<span 
class="small-caps">i</span><span 
class="small-caps">e</span><span 
class="small-caps">l</span><span 
class="small-caps">d</span><span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">g</span></tspan>, Roy&#x00A0;T. ; <tspan font-family="cmcsc" font-size="10">H<span 
class="small-caps">a</span><span 
class="small-caps">d</span><span 
class="small-caps">l</span><span 
class="small-caps">e</span><span 
class="small-caps">y</span></tspan>, Marc ; <tspan font-family="cmcsc" font-size="10">N<span 
class="small-caps">o</span><span 
class="small-caps">t</span><span 
class="small-caps">t</span><span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">g</span><span 
class="small-caps">h</span><span 
class="small-caps">a</span><span 
class="small-caps">m</span></tspan>, Mark
           ;       <tspan font-family="cmcsc" font-size="10">O<span 
class="small-caps">r</span><span 
class="small-caps">c</span><span 
class="small-caps">h</span><span 
class="small-caps">a</span><span 
class="small-caps">r</span><span 
class="small-caps">d</span></tspan>,       David:                   URI       Template       /       IETF
           Secretariat.  2012 (draft-gregorio-uritemplate-08). &#8211;  Internet-Draft. &#8211;  available
           online at <a 
href="http://datatracker.ietf.org/doc/draft-gregorio-uritemplate" class="url" ><tspan font-family="cmtt" font-size="12">http://datatracker.ietf.org/doc/draft-gregorio-uritemplate</tspan></a>;
           visited 1st March 2012
           </p>
           <p class="bibitem" ><span class="biblabel">
 [Gh07]    <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XRFC5023"></a><tspan font-family="cmcsc" font-size="10">G<span 
class="small-caps">r</span><span 
class="small-caps">e</span><span 
class="small-caps">g</span><span 
class="small-caps">o</span><span 
class="small-caps">r</span><span 
class="small-caps">i</span><span 
class="small-caps">o</span></tspan>, J. ; <tspan font-family="cmcsc" font-size="10"><span 
class="small-caps">h</span>O<span 
class="small-caps">r</span><span 
class="small-caps">a</span></tspan>, B. de: The Atom Publishing Protocol / RFC Editor.
           RFC Editor, October 2007 (5023). &#8211; RFC
           </p>
                                                                                         
                                                                                         
           <p class="bibitem" ><span class="biblabel">
 [GZLW11]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xconf/rest/GrafZLW11"></a><tspan font-family="cmcsc" font-size="10">G<span 
class="small-caps">r</span><span 
class="small-caps">a</span><span 
class="small-caps">f</span></tspan>,  Sebastian  ;  <tspan font-family="cmcsc" font-size="10">Z<span 
class="small-caps">h</span><span 
class="small-caps">o</span><span 
class="small-caps">l</span><span 
class="small-caps">u</span><span 
class="small-caps">d</span><span 
class="small-caps">e</span><span 
class="small-caps">v</span></tspan>,  Vyacheslav  ;  <tspan font-family="cmcsc" font-size="10">L<span 
class="small-caps">e</span><span 
class="small-caps">w</span><span 
class="small-caps">a</span><span 
class="small-caps">n</span><span 
class="small-caps">d</span><span 
class="small-caps">o</span><span 
class="small-caps">w</span><span 
class="small-caps">s</span><span 
class="small-caps">k</span><span 
class="small-caps">i</span></tspan>,  Lukas  ;
           <tspan font-family="cmcsc" font-size="10">W<span 
class="small-caps">a</span><span 
class="small-caps">l</span><span 
class="small-caps">d</span><span 
class="small-caps">v</span><span 
class="small-caps">o</span><span 
class="small-caps">g</span><span 
class="small-caps">e</span><span 
class="small-caps">l</span></tspan>, Marcel: Hecate, managing authorization with RESTful XML. In:
           <tspan font-family="cmcsc" font-size="10">A<span 
class="small-caps">l</span><span 
class="small-caps">a</span><span 
class="small-caps">r</span><span 
class="small-caps">c</span></tspan><tspan font-family="cmcsc" font-size="10">ó<span 
class="small-caps">n</span></tspan>, Rosa (Hrsg.) ; <tspan font-family="cmcsc" font-size="10">P<span 
class="small-caps">a</span><span 
class="small-caps">u</span><span 
class="small-caps">t</span><span 
class="small-caps">a</span><span 
class="small-caps">s</span><span 
class="small-caps">s</span><span 
class="small-caps">o</span></tspan>, Cesare (Hrsg.) ; <tspan font-family="cmcsc" font-size="10">W<span 
class="small-caps">i</span><span 
class="small-caps">l</span><span 
class="small-caps">d</span><span 
class="small-caps">e</span></tspan>, Erik (Hrsg.):
           <tspan font-family="cmti" font-size="12">WS-REST</tspan>, ACM, 2011. &#8211; ISBN 978&#8211;1&#8211;4503&#8211;0623&#8211;2, S. 51&#8211;58
           </p>
           <p class="bibitem" ><span class="biblabel">
 [Hic11a]  <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XHickson2011"></a><tspan font-family="cmcsc" font-size="10">H<span 
class="small-caps">i</span><span 
class="small-caps">c</span><span 
class="small-caps">k</span><span 
class="small-caps">s</span><span 
class="small-caps">o</span><span 
class="small-caps">n</span></tspan>,   Ian:      HTML   Microdata   /   W3C.       Version: May   2011.
           <a 
href="http://www.w3.org/TR/microdata/  http://dev.w3.org/html5/md/Overview.html" class="url" ><tspan font-family="cmtt" font-size="12">http://www.w3.org/TR/microdata/http://dev.w3.org/html5/md/Overview.html</tspan></a>.
           2011.    &#8211;           W3C    Working    Draft.    &#8211;           Available    online    at
           <a 
href="http://www.w3.org/TR/microdata/" class="url" ><tspan font-family="cmtt" font-size="12">http://www.w3.org/TR/microdata/</tspan></a>; visited at 17th February 2012
           </p>
           <p class="bibitem" ><span class="biblabel">
 [Hic11b]  <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XHickson2011a"></a><tspan font-family="cmcsc" font-size="10">H<span 
class="small-caps">i</span><span 
class="small-caps">c</span><span 
class="small-caps">k</span><span 
class="small-caps">s</span><span 
class="small-caps">o</span><span 
class="small-caps">n</span></tspan>, Ian:  HTML5. A vocabulary and associated APIs for HTML and
           XHTML / W3C.   Version: May 2011.  <a 
href="http://www.w3.org/TR/html5" class="url" ><tspan font-family="cmtt" font-size="12">http://www.w3.org/TR/html5</tspan></a>.  2011.
           &#8211;  W3C Working Draft. &#8211;  available online at <a 
href="http://www.w3.org/TR/html5" class="url" ><tspan font-family="cmtt" font-size="12">http://www.w3.org/TR/html5</tspan></a>;
           visited at 1st March 2012
           </p>
           <p class="bibitem" ><span class="biblabel">
 [HS09]    <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XJAX-RS1.1"></a><tspan font-family="cmcsc" font-size="10">H<span 
class="small-caps">a</span><span 
class="small-caps">d</span><span 
class="small-caps">l</span><span 
class="small-caps">e</span><span 
class="small-caps">y</span></tspan>,  Marc  ;  <tspan font-family="cmcsc" font-size="10">S<span 
class="small-caps">a</span><span 
class="small-caps">n</span><span 
class="small-caps">d</span><span 
class="small-caps">o</span><span 
class="small-caps">z</span></tspan>,  Paul:   <tspan font-family="cmti" font-size="12">JSR 311: JAX-RS: The Java API for</tspan>
           <tspan font-family="cmti" font-size="12">RESTful Web Services Version 1.1</tspan>.  http://www.jcp.org/en/jsr/detail?id=311,
           September 2009
           </p>
           <p class="bibitem" ><span class="biblabel">
 [HSD98]  <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XRFC2425"></a><tspan font-family="cmcsc" font-size="10">H<span 
class="small-caps">o</span><span 
class="small-caps">w</span><span 
class="small-caps">e</span><span 
class="small-caps">s</span></tspan>, T. ; <tspan font-family="cmcsc" font-size="10">S<span 
class="small-caps">m</span><span 
class="small-caps">i</span><span 
class="small-caps">t</span><span 
class="small-caps">h</span></tspan>, M. ; <tspan font-family="cmcsc" font-size="10">D<span 
class="small-caps">a</span><span 
class="small-caps">w</span><span 
class="small-caps">s</span><span 
class="small-caps">o</span><span 
class="small-caps">n</span></tspan>, F.: A MIME Content-Type for Directory
           Information / RFC Editor. RFC Editor, September 1998 (2425). &#8211; RFC
           </p>
           <p class="bibitem" ><span class="biblabel">
 [NL99]    <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XNielsen1999"></a><tspan font-family="cmcsc" font-size="10">N<span 
class="small-caps">i</span><span 
class="small-caps">e</span><span 
class="small-caps">l</span><span 
class="small-caps">s</span><span 
class="small-caps">e</span><span 
class="small-caps">n</span></tspan>, Henrik&#x00A0;F. ; <tspan font-family="cmcsc" font-size="10">L<span 
class="small-caps">a</span>L<span 
class="small-caps">i</span><span 
class="small-caps">b</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span><span 
class="small-caps">t</span><span 
class="small-caps">e</span></tspan>, Daniel:  Editing the Web. Detecting the
           Lost Update Problem Using Unreserved Checkout / W3C.  Version: May 1999.
           <a 
href="http://www.w3.org/1999/04/Editing" class="url" ><tspan font-family="cmtt" font-size="12">http://www.w3.org/1999/04/Editing</tspan></a>. 1999. &#8211; W3C Note. &#8211; Available online
           at <a 
href="http://www.w3.org/1999/04/Editing" class="url" ><tspan font-family="cmtt" font-size="12">http://www.w3.org/1999/04/Editing</tspan></a>; visited at 1st March 2012
           </p>
           <p class="bibitem" ><span class="biblabel">
 [Not07]   <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XRFC5005"></a><tspan font-family="cmcsc" font-size="10">N<span 
class="small-caps">o</span><span 
class="small-caps">t</span><span 
class="small-caps">t</span><span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">g</span><span 
class="small-caps">h</span><span 
class="small-caps">a</span><span 
class="small-caps">m</span></tspan>, M.: Feed Paging and Archiving / RFC Editor. RFC Editor,
           September 2007 (5005). &#8211; RFC
           </p>
           <p class="bibitem" ><span class="biblabel">
 [NS05]    <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XRFC4287"></a><tspan font-family="cmcsc" font-size="10">N<span 
class="small-caps">o</span><span 
class="small-caps">t</span><span 
class="small-caps">t</span><span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">g</span><span 
class="small-caps">h</span><span 
class="small-caps">a</span><span 
class="small-caps">m</span></tspan>, M. ; <tspan font-family="cmcsc" font-size="10">S<span 
class="small-caps">a</span><span 
class="small-caps">y</span><span 
class="small-caps">r</span><span 
class="small-caps">e</span></tspan>, R.: The Atom Syndication Format / RFC Editor.
           RFC Editor, December 2005 (4287). &#8211; RFC
           </p>
                                                                                         
                                                                                         
           <p class="bibitem" ><span class="biblabel">
 [Ode11]   <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XOdersky2011"></a><tspan font-family="cmcsc" font-size="10">O<span 
class="small-caps">d</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span><span 
class="small-caps">s</span><span 
class="small-caps">k</span><span 
class="small-caps">y</span></tspan>,   Martin:         <tspan font-family="cmti" font-size="12">The   Scala   Language   Specification   Version</tspan>
           <tspan font-family="cmti" font-size="12">2.9</tspan>.          website    scala-lang.org,    section    Documentation/Manuals/Scala
           Language    Specification,    May    2011.    &#8211;           Available    online    at
           <a 
href="http://www.scala-lang.org/sites/default/files/linuxsoft_archives/docu/f%iles/ScalaReference.pdf" class="url" ><tspan font-family="cmtt" font-size="12">http://www.scala-lang.org/sites/default/files/linuxsoft_archives/docu/files/ScalaReference.pdf</tspan></a>
           visited on February 14th 2012.
           </p>
           <p class="bibitem" ><span class="biblabel">
 [Ope11]   <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XOSSpec2.0.1"></a><tspan font-family="cmcsc" font-size="10">O<span 
class="small-caps">p</span><span 
class="small-caps">e</span><span 
class="small-caps">n</span>S<span 
class="small-caps">o</span><span 
class="small-caps">c</span><span 
class="small-caps">i</span><span 
class="small-caps">a</span><span 
class="small-caps">l</span></tspan>
           <tspan font-family="cmcsc" font-size="10"><span 
class="small-caps">a</span><span 
class="small-caps">n</span><span 
class="small-caps">d</span> G<span 
class="small-caps">a</span><span 
class="small-caps">d</span><span 
class="small-caps">g</span><span 
class="small-caps">e</span><span 
class="small-caps">t</span><span 
class="small-caps">s</span> S<span 
class="small-caps">p</span><span 
class="small-caps">e</span><span 
class="small-caps">c</span><span 
class="small-caps">i</span><span 
class="small-caps">f</span><span 
class="small-caps">i</span><span 
class="small-caps">c</span><span 
class="small-caps">a</span><span 
class="small-caps">t</span><span 
class="small-caps">i</span><span 
class="small-caps">o</span><span 
class="small-caps">n</span> G<span 
class="small-caps">r</span><span 
class="small-caps">o</span><span 
class="small-caps">u</span><span 
class="small-caps">p</span></tspan>: <tspan font-family="cmti" font-size="12">OpenSocial Specification Version 2.0.1</tspan>.
           <a 
href="http://docs.opensocial.org/display/OSD/Specs" class="url" ><tspan font-family="cmtt" font-size="12">http://docs.opensocial.org/display/OSD/Specs</tspan></a>.  Version: 11 2011
           </p>
           <p class="bibitem" ><span class="biblabel">
 [PO08]   <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XPradel2008a"></a><tspan font-family="cmcsc" font-size="10">P<span 
class="small-caps">r</span><span 
class="small-caps">a</span><span 
class="small-caps">d</span><span 
class="small-caps">e</span><span 
class="small-caps">l</span></tspan>, Michael ; <tspan font-family="cmcsc" font-size="10">O<span 
class="small-caps">d</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span><span 
class="small-caps">s</span><span 
class="small-caps">k</span><span 
class="small-caps">y</span></tspan>, Martin: Scala Roles - A Lightweight Approach
           towards Reusable Collaborations. In: <tspan font-family="cmti" font-size="12">International Conference on Software and</tspan>
           <tspan font-family="cmti" font-size="12">Data Technologies (ICSOFT &#8217;08)</tspan>, 2008
           </p>
           <p class="bibitem" ><span class="biblabel">
 [PSMB98]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XPaoli:98:XR"></a><tspan font-family="cmcsc" font-size="10">P<span 
class="small-caps">a</span><span 
class="small-caps">o</span><span 
class="small-caps">l</span><span 
class="small-caps">i</span></tspan>,                  Jean                  ;                  <tspan font-family="cmcsc" font-size="10">S<span 
class="small-caps">p</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span><span 
class="small-caps">b</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span><span 
class="small-caps">g</span>-M<span 
class="small-caps">c</span>Q<span 
class="small-caps">u</span><span 
class="small-caps">e</span><span 
class="small-caps">e</span><span 
class="small-caps">n</span></tspan>,
           C.&#x00A0;M. ; <tspan font-family="cmcsc" font-size="10">B<span 
class="small-caps">r</span><span 
class="small-caps">a</span><span 
class="small-caps">y</span></tspan>, Tim: XML 1.0 Recommendation / W3C.  Version: Februar 1998.
           <a 
href="http://www.w3.org/TR/1998/REC-xml-19980210" class="url" ><tspan font-family="cmtt" font-size="12">http://www.w3.org/TR/1998/REC-xml-19980210</tspan></a>.  1998. &#8211;  first Edition of a
           Recommendation. &#8211; http://www.w3.org/TR/1998/REC-xml-19980210
           </p>
           <p class="bibitem" ><span class="biblabel">
 [PZL08]  <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XPautasso:2008:RWS:1367497.1367606"></a><tspan font-family="cmcsc" font-size="10">P<span 
class="small-caps">a</span><span 
class="small-caps">u</span><span 
class="small-caps">t</span><span 
class="small-caps">a</span><span 
class="small-caps">s</span><span 
class="small-caps">s</span><span 
class="small-caps">o</span></tspan>, Cesare ; <tspan font-family="cmcsc" font-size="10">Z<span 
class="small-caps">i</span><span 
class="small-caps">m</span><span 
class="small-caps">m</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span><span 
class="small-caps">m</span><span 
class="small-caps">a</span><span 
class="small-caps">n</span><span 
class="small-caps">n</span></tspan>, Olaf ; <tspan font-family="cmcsc" font-size="10">L<span 
class="small-caps">e</span><span 
class="small-caps">y</span><span 
class="small-caps">m</span><span 
class="small-caps">a</span><span 
class="small-caps">n</span><span 
class="small-caps">n</span></tspan>, Frank:  Restful web
           services vs. &#8221;big&#8221;&#8217; web services: making the right architectural decision.   In:
           <tspan font-family="cmti" font-size="12">Proceedings of the 17th international conference on World Wide Web</tspan>. New York,
           NY, USA : ACM, 2008 (WWW &#8217;08). &#8211; ISBN 978&#8211;1&#8211;60558&#8211;085&#8211;2, 805&#8211;814
           </p>
           <p class="bibitem" ><span class="biblabel">
 [RBM05] <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XRFC4324"></a><tspan font-family="cmcsc" font-size="10">R<span 
class="small-caps">o</span><span 
class="small-caps">y</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span></tspan>, D. ; <tspan font-family="cmcsc" font-size="10">B<span 
class="small-caps">a</span><span 
class="small-caps">b</span><span 
class="small-caps">i</span><span 
class="small-caps">c</span><span 
class="small-caps">s</span></tspan>, G. ; <tspan font-family="cmcsc" font-size="10">M<span 
class="small-caps">a</span><span 
class="small-caps">n</span><span 
class="small-caps">s</span><span 
class="small-caps">o</span><span 
class="small-caps">u</span><span 
class="small-caps">r</span></tspan>, S.: Calendar Access Protocol (CAP)
           / RFC Editor. RFC Editor, December 2005 (4324). &#8211; RFC
           </p>
           <p class="bibitem" ><span class="biblabel">
 [RGJ05]  <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xinstance7"></a><tspan font-family="cmcsc" font-size="10">R<span 
class="small-caps">e</span><span 
class="small-caps">i</span><span 
class="small-caps">f</span></tspan>,  Gerald  ;  <tspan font-family="cmcsc" font-size="10">G<span 
class="small-caps">a</span><span 
class="small-caps">l</span><span 
class="small-caps">l</span></tspan>,  Harald&#x00A0;C.  ;  <tspan font-family="cmcsc" font-size="10">J<span 
class="small-caps">a</span><span 
class="small-caps">z</span><span 
class="small-caps">a</span><span 
class="small-caps">y</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span><span 
class="small-caps">i</span></tspan>,  Mehdi:   WEESA  -  Web
           Engineering  for  Semanitc  Web  Applications.    In:  <tspan font-family="cmti" font-size="12">Proceedings  of  the  14th</tspan>
           <tspan font-family="cmti" font-size="12">International World Wide Web Conference</tspan>. Chiba, Japan, May 2005, S. 722&#8211;729
           </p>
           <p class="bibitem" ><span class="biblabel">
 [Sne07]   <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span>
           <a 
 id="Xdraft-snell-atompub-feature"></a><tspan font-family="cmcsc" font-size="10">S<span 
class="small-caps">n</span><span 
class="small-caps">e</span><span 
class="small-caps">l</span><span 
class="small-caps">l</span></tspan>, James: Atom Publishing Protocol Feature Discovery / IETF Secretariat.
           2007 (draft-snell-atompub-feature-12). &#8211;  Internet-Draft. &#8211;  available online at
           <a 
href="http://tools.ietf.org/id/draft-snell-atompub-feature-12.txt" class="url" ><tspan font-family="cmtt" font-size="12">http://tools.ietf.org/id/draft-snell-atompub-feature-12.txt</tspan></a>;  visited
           at 2nd March 2012
                                                                                         
                                                                                         
           </p>
           <p class="bibitem" ><span class="biblabel">
 [Sne08]   <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XSnell2008"></a><tspan font-family="cmcsc" font-size="10">S<span 
class="small-caps">n</span><span 
class="small-caps">e</span><span 
class="small-caps">l</span><span 
class="small-caps">l</span></tspan>,            James&#x00A0;M.:                                   <tspan font-family="cmti" font-size="12">Convert           Atom</tspan>
           <tspan font-family="cmti" font-size="12">documents to JSON</tspan>. IBM developerWorks, January 2008. &#8211; Available online at
           <a 
href="http://www.ibm.com/developerworks/library/x-atom2json/index.html" class="url" ><tspan font-family="cmtt" font-size="12">http://www.ibm.com/developerworks/library/x-atom2json/index.html</tspan></a>;
           visited January 7th 2012
           </p>
           <p class="bibitem" ><span class="biblabel">
 [Sne12]   <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xdraft-snell-atompub-tombstones-14"></a><tspan font-family="cmcsc" font-size="10">S<span 
class="small-caps">n</span><span 
class="small-caps">e</span><span 
class="small-caps">l</span><span 
class="small-caps">l</span></tspan>,  James:   The  Atom  &#8221;deleted-entry&#8221;  Element  /  IETF  Secretariat.
           2012 (draft-snell-atompub-tombstones-14). &#8211;  Internet-Draft. &#8211;  available online
           at   <a 
href="http://tools.ietf.org/id/draft-snell-atompub-tombstones-14.txt" class="url" ><tspan font-family="cmtt" font-size="12">http://tools.ietf.org/id/draft-snell-atompub-tombstones-14.txt</tspan></a>;
           visited at 28th February 2012
           </p>
           <p class="bibitem" ><span class="biblabel">
 [Ste08]    <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XSteimann2008"></a><tspan font-family="cmcsc" font-size="10">S<span 
class="small-caps">t</span><span 
class="small-caps">e</span><span 
class="small-caps">i</span><span 
class="small-caps">m</span><span 
class="small-caps">a</span><span 
class="small-caps">n</span><span 
class="small-caps">n</span></tspan>, Friedrich: Role + counter-role = relationship + collaboration. In:
           <tspan font-family="cmti" font-size="12">OOPSLA &#8217;08: 23rd Annual ACM Conference on Object-Oriented Programming.</tspan>
           <tspan font-family="cmti" font-size="12">Systems,  Languages  and  Applications</tspan>.      New  York,  NY,  USA  :  ACM,
           October   2008.   &#8211;      ISBN   978&#8211;1&#8211;60558&#8211;215&#8211;3.   &#8211;      available   online   at
           <a 
href="http://www.fernuni-hagen.de/ps/veroeffentlichungen/57336.shtml" class="url" ><tspan font-family="cmtt" font-size="12">http://www.fernuni-hagen.de/ps/veroeffentlichungen/57336.shtml</tspan></a>;
           visited 2nd March 2012
           </p>
           <p class="bibitem" ><span class="biblabel">
 [Ten12]   <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span>
           <a 
 id="XTennison2012"></a><tspan font-family="cmcsc" font-size="10">T<span 
class="small-caps">e</span><span 
class="small-caps">n</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">o</span><span 
class="small-caps">n</span></tspan>, Jeni: HTML Data Guide - Working Draft / W3C.  Version: January
           2012. <a 
href="http://www.w3.org/TR/2012/WD-html-data-guide-20120112/" class="url" ><tspan font-family="cmtt" font-size="12">http://www.w3.org/TR/2012/WD-html-data-guide-20120112/</tspan></a>. 2012. &#8211;
           W3C       Working       Draft.       &#8211;                    online       available       at
           <a 
href="http://www.w3.org/TR/2012/WD-html-data-guide-20120112/" class="url" ><tspan font-family="cmtt" font-size="12">http://www.w3.org/TR/2012/WD-html-data-guide-20120112/</tspan></a>; last visited at
           16th February 2012
           </p>
           <p class="bibitem" ><span class="biblabel">
 [Web10]  <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XWebber2010"></a><tspan font-family="cmcsc" font-size="10">W<span 
class="small-caps">e</span><span 
class="small-caps">b</span><span 
class="small-caps">b</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span></tspan>, Jim:  <tspan font-family="cmti" font-size="12">REST in Practice: Hypermedia and Systems Architecture</tspan>.
           O&#8217;Reilly, 2010. &#8211; ISBN 978&#8211;0&#8211;596&#8211;80582&#8211;1
           </p>
           <p class="bibitem" ><span class="biblabel">
 [WM09]  <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XWilde:2009:FQP:1693155.1693220"></a><tspan font-family="cmcsc" font-size="10">W<span 
class="small-caps">i</span><span 
class="small-caps">l</span><span 
class="small-caps">d</span><span 
class="small-caps">e</span></tspan>, Erik ; <tspan font-family="cmcsc" font-size="10">M<span 
class="small-caps">a</span><span 
class="small-caps">r</span><span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">o</span><span 
class="small-caps">s</span></tspan>, Alexandros: Feed Querying as a Proxy for Querying
           the Web. In: <tspan font-family="cmti" font-size="12">Proceedings of the 8th International Conference on Flexible Query</tspan>
           <tspan font-family="cmti" font-size="12">Answering Systems</tspan>.  Berlin, Heidelberg : Springer-Verlag, 2009 (FQAS &#8217;09). &#8211;
           ISBN 978&#8211;3&#8211;642&#8211;04956&#8211;9, 663&#8211;674
           </p>
           <p class="bibitem" ><span class="biblabel">
 [Yat07]   <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span>
           <a 
 id="Xdraft-yates-atompub-calatom-00.txt"></a><tspan font-family="cmcsc" font-size="10">Y<span 
class="small-caps">a</span><span 
class="small-caps">t</span><span 
class="small-caps">e</span><span 
class="small-caps">s</span></tspan>, Rob: <tspan font-family="cmti" font-size="12">CalAtom</tspan>. <a 
href="http://robubu.com/CalAtom/calatom-draft-00.txt" class="url" ><tspan font-family="cmtt" font-size="12">http://robubu.com/CalAtom/calatom-draft-00.txt</tspan></a>.
           <a 
href="http://robubu.com/CalAtom/calatom-draft-00.txt" class="url" ><tspan font-family="cmtt" font-size="12">http://robubu.com/CalAtom/calatom-draft-00.txt</tspan></a>.  Version: April 2007
           </p>
                                                                                         
                                                                                         
           <p class="bibitem" ><span class="biblabel">
 [YSHG07] <span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XYesilada:2007:EDS:1279700.1279704"></a><tspan font-family="cmcsc" font-size="10">Y<span 
class="small-caps">e</span><span 
class="small-caps">s</span><span 
class="small-caps">i</span><span 
class="small-caps">l</span><span 
class="small-caps">a</span><span 
class="small-caps">d</span><span 
class="small-caps">a</span></tspan>,   Yeliz   ;   <tspan font-family="cmcsc" font-size="10">S<span 
class="small-caps">t</span><span 
class="small-caps">e</span><span 
class="small-caps">v</span><span 
class="small-caps">e</span><span 
class="small-caps">n</span><span 
class="small-caps">s</span></tspan>,   Robert   ;   <tspan font-family="cmcsc" font-size="10">H<span 
class="small-caps">a</span><span 
class="small-caps">r</span><span 
class="small-caps">p</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span></tspan>,   Simon   ;   <tspan font-family="cmcsc" font-size="10">G<span 
class="small-caps">o</span><span 
class="small-caps">b</span><span 
class="small-caps">l</span><span 
class="small-caps">e</span></tspan>,
           Carole:     Evaluating  DANTE:  Semantic  transcoding  for  visually  disabled
           users.     In:  <tspan font-family="cmti" font-size="12">ACM  Trans.  Comput.-Hum.  Interact.  </tspan>14  (2007),  September.
           <a 
href="http://dx.doi.org/http://doi.acm.org/10.1145/1279700.1279704" class="url" ><tspan font-family="cmtt" font-size="12">http://dx.doi.org/http://doi.acm.org/10.1145/1279700.1279704</tspan></a>. &#8211; DOI
           http://doi.acm.org/10.1145/1279700.1279704. &#8211; ISSN 1073&#8211;0516
</p>
           </div>
     
</body></html> 

                                                                                         


